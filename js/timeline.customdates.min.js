/* Compiled from:
  timeline-spokesman.js
*/
(function(){var a=!1,b=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){};Class.extend=function(c){function d(){!a&&this.init&&this.init.apply(this,arguments)}var e=this.prototype;a=!0;var f=new this;a=!1;for(var n in c)f[n]="function"==typeof c[n]&&"function"==typeof e[n]&&b.test(c[n])?function(a,b){return function(){var c=this._super;this._super=e[a];var d=b.apply(this,arguments);this._super=c;return d}}(n,c[n]):c[n];d.prototype=f;d.prototype.constructor=d;d.extend=arguments.callee;
return d}})();var global=function(){return this||(0,eval)("this")}();
if("undefined"==typeof VMM){var $;"undefined"!=typeof jQuery&&($=jQuery);var VMM=Class.extend({});VMM.master_config={init:function(){return this},vp:"Pellentesque nibh felis, eleifend id, commodo in, interdum vitae, leo",keys:{flickr:"RAIvxHY4hE/Elm5cieh4X5ptMyDpj7MYIxziGxi0WGCcy1s+yr7rKQ==",google:"jwNGnYw4hE9lmAez4ll0QD+jo6SKBJFknkopLS4FrSAuGfIwyj57AusuR0s8dAo="},youtube:{active:!1,array:[],api_loaded:!1,que:[]},googlemaps:{active:!1,map_active:!1,places_active:!1,array:[],api_loaded:!1,que:[]}}.init();
VMM.createElement=function(a,b,c,d,e){var f="";null!=a&&""!=a&&(f+="<"+a,null!=c&&""!=c&&(f+=" class='"+c+"'"),null!=d&&""!=d&&(f+=" "+d),null!=e&&""!=e&&(f+=" "+e),f+=">",null!=b&&""!=b&&(f+=b),f=f+"</"+a+">");return f};VMM.createMediaElement=function(a,b,c){var d;d="<div class='media'>";null!=a&&""!=a&&(valid=!0,d+="<img src='"+a+"'>",null!=c&&""!=c&&(d+=VMM.createElement("div",c,"credit")),null!=b&&""!=b&&(d+=VMM.createElement("div",b,"caption")));return d+"</div>"};VMM.attachElement=function(a,
b){"undefined"!=typeof jQuery&&$(a).html(b)};VMM.appendElement=function(a,b){"undefined"!=typeof jQuery&&$(a).append(b)};VMM.getHTML=function(a){if("undefined"!=typeof jQuery)return a=jQuery(a).html()};VMM.getElement=function(a,b){var c;if("undefined"!=typeof jQuery)return c=b?jQuery(a).parent().get(0):jQuery(a).get(0)};VMM.bindEvent=function(a,b,c,d){var e="click",f={};null!=c&&""!=c&&(e=c);null!=f&&""!=f&&(f=d);"undefined"!=typeof jQuery&&jQuery(a).bind(e,f,b)};VMM.unbindEvent=function(a,b,c){var d=
"click";null!=c&&""!=c&&(d=c);"undefined"!=typeof jQuery&&jQuery(a).unbind(d,b)};VMM.fireEvent=function(a,b,c){var d="click",e=[];null!=b&&""!=b&&(d=b);null!=c&&""!=c&&(e=c);"undefined"!=typeof jQuery&&jQuery(a).trigger(d,e)};VMM.getJSON=function(a,b,c){if("undefined"!=typeof jQuery)if("Explorer"==VMM.Browser.browser&&8<=parseInt(VMM.Browser.version,10)&&window.XDomainRequest){trace("it's ie");var d=a;if(d.match("^http://"))return trace("RUNNING GET JSON"),jQuery.getJSON(a,b,c);if(d.match("^https://")){trace("RUNNING XDR");
var d=d.replace("https://","http://"),e=new XDomainRequest;e.open("get",d);e.onload=function(){var a=VMM.parseJSON(e.responseText);trace(e.responseText);if("null"==type.of(a)||"undefined"==type.of(a))trace("IE JSON ERROR");else return b(a)};e.send()}else return jQuery.getJSON(a,b,c)}else return jQuery.getJSON(a,b,c)};VMM.parseJSON=function(a){if("undefined"!=typeof jQuery)return jQuery.parseJSON(a)};VMM.appendAndGetElement=function(a,b,c,d){var e,f="",n="";null!=c&&""!=c&&(f=c);null!=d&&""!=d&&(n=
d);"undefined"!=typeof jQuery&&(e=$(b),e.addClass(f),e.html(n),jQuery(a).append(e));return e};VMM.Element={init:function(){return this},hide:function(a,b){null!=b&&""!=b?"undefined"!=typeof jQuery&&jQuery(a).hide(b):"undefined"!=typeof jQuery&&jQuery(a).hide()},remove:function(a){"undefined"!=typeof jQuery&&jQuery(a).remove()},detach:function(a){"undefined"!=typeof jQuery&&jQuery(a).detach()},append:function(a,b){"undefined"!=typeof jQuery&&jQuery(a).append(b)},show:function(a,b){null!=b&&""!=b?"undefined"!=
typeof jQuery&&jQuery(a).show(b):"undefined"!=typeof jQuery&&jQuery(a).show()},load:function(a,b,c){var d={elem:a};null!=d&&""!=d&&(d=c);"undefined"!=typeof jQuery&&jQuery(a).load(d,b)},addClass:function(a,b){"undefined"!=typeof jQuery&&jQuery(a).addClass(b)},removeClass:function(a,b){"undefined"!=typeof jQuery&&jQuery(a).removeClass(b)},attr:function(a,b,c){if(null!=c&&""!=c)"undefined"!=typeof jQuery&&jQuery(a).attr(b,c);else if("undefined"!=typeof jQuery)return jQuery(a).attr(b)},prop:function(a,
b,c){"undefined"==typeof jQuery||!/[1-9]\.[3-9].[1-9]/.test($.fn.jquery)?VMM.Element.attribute(a,b,c):jQuery(a).prop(b,c)},attribute:function(a,b,c){if(null!=c&&""!=c)"undefined"!=typeof jQuery&&jQuery(a).attr(b,c);else if("undefined"!=typeof jQuery)return jQuery(a).attr(b)},visible:function(a,b){if(null!=b)"undefined"!=typeof jQuery&&(b?jQuery(a).show(0):jQuery(a).hide(0));else if("undefined"!=typeof jQuery)return jQuery(a).is(":visible")?!0:!1},css:function(a,b,c){if(null!=c&&""!=c)"undefined"!=
typeof jQuery&&jQuery(a).css(b,c);else if("undefined"!=typeof jQuery)return jQuery(a).css(b)},cssmultiple:function(a,b){if("undefined"!=typeof jQuery)return jQuery(a).css(b)},offset:function(a){var b;"undefined"!=typeof jQuery&&(b=jQuery(a).offset());return b},position:function(a){var b;"undefined"!=typeof jQuery&&(b=jQuery(a).position());return b},width:function(a,b){if(null!=b&&""!=b)"undefined"!=typeof jQuery&&jQuery(a).width(b);else if("undefined"!=typeof jQuery)return jQuery(a).width()},height:function(a,
b){if(null!=b&&""!=b)"undefined"!=typeof jQuery&&jQuery(a).height(b);else if("undefined"!=typeof jQuery)return jQuery(a).height()},toggleClass:function(a,b){"undefined"!=typeof jQuery&&jQuery(a).toggleClass(b)},each:function(a,b){"undefined"!=typeof jQuery&&jQuery(a).each(b)},html:function(a,b){var c;if("undefined"!=typeof jQuery)return c=jQuery(a).html();if(null!=b&&""!=b)"undefined"!=typeof jQuery&&jQuery(a).html(b);else if("undefined"!=typeof jQuery)return c=jQuery(a).html()},find:function(a,b){if("undefined"!=
typeof jQuery)return jQuery(a).find(b)},stop:function(a){"undefined"!=typeof jQuery&&jQuery(a).stop()},animate:function(a,b,c,d,e){var f="easein",n=1E3,j={};null!=b&&(n=1>b?1:Math.round(b));null!=c&&""!=c&&(f=c);j=null!=d?d:{opacity:0};"mobile"==VMM.Browser.device||"tablet"==VMM.Browser.device?(b=Math.round(10*(n/1500))/10+"s",VMM.Element.css(a,"-webkit-transition","all "+b+" ease"),VMM.Element.css(a,"-moz-transition","all "+b+" ease"),VMM.Element.css(a,"-o-transition","all "+b+" ease"),VMM.Element.css(a,
"-ms-transition","all "+b+" ease"),VMM.Element.css(a,"transition","all "+b+" ease"),VMM.Element.cssmultiple(a,j)):"undefined"!=typeof jQuery&&(null!=e&&""!=e?jQuery(a).animate(j,{queue:!1,duration:n,easing:f,complete:e}):jQuery(a).animate(j,{queue:!1,duration:n,easing:f}))}}.init();VMM.TouchSlider={createPanel:function(a,b,c,d,e,f){VMM.TouchSlider.vertical=!1;VMM.TouchSlider.vertical=e;VMM.TouchSlider.width=c;VMM.TouchSlider.height=f;VMM.TouchSlider.makeTouchable(a,b)},removePanel:function(a){VMM.unbindEvent(a,
VMM.TouchSlider.onTouchStart,"touchstart");VMM.unbindEvent(a,VMM.TouchSlider.onTouchMove,"touchmove");VMM.unbindEvent(a,VMM.TouchSlider.onTouchEnd,"touchend")},makeTouchable:function(a,b){VMM.bindEvent(a,VMM.TouchSlider.onTouchStart,"touchstart",{element:b});VMM.bindEvent(a,VMM.TouchSlider.onTouchMove,"touchmove",{element:b});VMM.bindEvent(a,VMM.TouchSlider.onTouchEnd,"touchend",{element:b})},onTouchStart:function(a){VMM.TouchSlider.touchStart(a.data.element,a);a.preventDefault();a.stopPropagation();
return!0},onTouchEnd:function(a){a.preventDefault();a.stopPropagation();return VMM.TouchSlider.sliding?(VMM.TouchSlider.sliding=!1,VMM.TouchSlider.touchEnd(a.data.element,a),!1):!0},onTouchMove:function(a){VMM.TouchSlider.touchMove(a.data.element,a);a.preventDefault();a.stopPropagation();return!1},getLeft:function(a){return parseInt(VMM.Element.css(a,"left").substring(0,VMM.Element.css(a,"left").length-2),10)},getTop:function(a){return parseInt(VMM.Element.css(a,"top").substring(0,VMM.Element.css(a,
"top").length-2),10)},touchStart:function(a,b){VMM.Element.css(a,"-webkit-transition-duration","0");VMM.TouchSlider.startX=b.originalEvent.touches[0].screenX;VMM.TouchSlider.startY=b.originalEvent.touches[0].screenY;VMM.TouchSlider.startLeft=VMM.TouchSlider.getLeft(a);VMM.TouchSlider.startTop=VMM.TouchSlider.getTop(a);VMM.TouchSlider.touchStartTime=(new Date).getTime()},touchEnd:function(a,b){0<VMM.TouchSlider.getLeft(a)?(VMM.TouchSlider.vertical?VMM.Element.animate(a,1E3,"",{top:0}):VMM.Element.animate(a,
1E3,"",{left:0}),VMM.TouchSlider.startX=null,VMM.TouchSlider.startY=null,VMM.fireEvent(a,"TOUCHUPDATE",[0])):VMM.TouchSlider.slideMomentum(a,b)},slideMomentum:function(a){var b=10*((new Date).getTime()-VMM.TouchSlider.touchStartTime),c=b,d=VMM.TouchSlider.getLeft(a),e=VMM.TouchSlider.getTop(a),f=6E3*(Math.abs(VMM.TouchSlider.startLeft)-Math.abs(d)),n=6E3*(Math.abs(VMM.TouchSlider.startTop)-Math.abs(e)),b=Math.round(f/b);slideAdjustY=Math.round(n/b);b+=d;c={top:Math.min(0,slideAdjustY+e),left:Math.min(0,
b),time:c};VMM.fireEvent(a,"TOUCHUPDATE",[c]);VMM.TouchSlider.startX=null;VMM.TouchSlider.startY=null},doSlide:function(a,b,c){VMM.Element.css(a,"-webkit-transition-property","left");VMM.Element.css(a,"-webkit-transition-duration",c);VMM.Element.css(a,"left",b)},touchMove:function(a,b){VMM.TouchSlider.sliding=!0;VMM.TouchSlider.vertical?VMM.TouchSlider.startY>b.originalEvent.touches[0].screenY?(VMM.Element.css(a,"top",-(VMM.TouchSlider.startY-b.originalEvent.touches[0].screenY-VMM.TouchSlider.startTop)),
VMM.TouchSlider.slidingTop=!0):(VMM.Element.css(a,"top",-(VMM.TouchSlider.startY-b.originalEvent.touches[0].screenY-VMM.TouchSlider.startTop)),VMM.TouchSlider.slidingTop=!1):VMM.TouchSlider.startX>b.originalEvent.touches[0].screenX?(VMM.Element.css(a,"left",-(VMM.TouchSlider.startX-b.originalEvent.touches[0].screenX-VMM.TouchSlider.startLeft)),VMM.TouchSlider.slidingLeft=!0):(VMM.Element.css(a,"left",-(VMM.TouchSlider.startX-b.originalEvent.touches[0].screenX-VMM.TouchSlider.startLeft)),VMM.TouchSlider.slidingLeft=
!1)}};VMM.hideUrlBar=function(){var a=window,b=a.document;if(!location.hash||!a.addEventListener){window.scrollTo(0,1);var c=1,d=setInterval(function(){b.body&&(clearInterval(d),c="scrollTop"in b.body?b.body.scrollTop:1,a.scrollTo(0,1===c?0:1))},15);a.addEventListener("load",function(){setTimeout(function(){a.scrollTo(0,1===c?0:1)},0)},!1)}};VMM.DragSlider={createPanel:function(a,b,c,d,e){VMM.DragSlider.width=c;VMM.DragSlider.makeDraggable(a,b);VMM.DragSlider.drag_elem=a;VMM.DragSlider.sticky=e},
makeDraggable:function(a,b){VMM.bindEvent(a,VMM.DragSlider.onDragStart,"mousedown",{element:b,delement:a});VMM.bindEvent(a,VMM.DragSlider.onDragEnd,"mouseup",{element:b,delement:a});VMM.bindEvent(a,VMM.DragSlider.onDragLeave,"mouseleave",{element:b,delement:a})},cancelSlide:function(){VMM.unbindEvent(VMM.DragSlider.drag_elem,VMM.DragSlider.onDragMove,"mousemove");return!0},onDragLeave:function(a){VMM.unbindEvent(a.data.delement,VMM.DragSlider.onDragMove,"mousemove");a.preventDefault();a.stopPropagation();
return!0},onDragStart:function(a){VMM.DragSlider.dragStart(a.data.element,a.data.delement,a);a.preventDefault();a.stopPropagation();return!0},onDragEnd:function(a){a.preventDefault();a.stopPropagation();return VMM.DragSlider.sliding?(VMM.DragSlider.sliding=!1,VMM.DragSlider.dragEnd(a.data.element,a.data.delement,a),!1):!0},onDragMove:function(a){VMM.DragSlider.dragMove(a.data.element,a);a.preventDefault();a.stopPropagation();return!1},dragStart:function(a,b,c){VMM.DragSlider.startX=c.pageX;VMM.DragSlider.startLeft=
VMM.DragSlider.getLeft(a);VMM.DragSlider.dragStartTime=(new Date).getTime();VMM.DragSlider.dragWidth=VMM.Element.width(b);Math.round(VMM.DragSlider.startX-c.pageX-VMM.DragSlider.startLeft);VMM.Element.stop(a);VMM.bindEvent(b,VMM.DragSlider.onDragMove,"mousemove",{element:a})},dragEnd:function(a,b,c){VMM.unbindEvent(b,VMM.DragSlider.onDragMove,"mousemove");0<VMM.DragSlider.getLeft(a)||VMM.DragSlider.dragMomentum(a,c)},dragMove:function(a,b){VMM.DragSlider.sliding=!0;VMM.DragSlider.startX>b.pageX?(VMM.Element.css(a,
"left",-(VMM.DragSlider.startX-b.pageX-VMM.DragSlider.startLeft)),VMM.DragSlider.slidingLeft=!0):(VMM.Element.css(a,"left",-(VMM.DragSlider.startX-b.pageX-VMM.DragSlider.startLeft)),VMM.DragSlider.slidingLeft=!1)},dragMomentum:function(a){var b=10*((new Date).getTime()-VMM.DragSlider.dragStartTime),c=b,d=VMM.DragSlider.getLeft(a),e=6E3*(Math.abs(VMM.DragSlider.startLeft)-Math.abs(d)),b=Math.round(e/b),b={left:Math.min(d+b),time:c};VMM.fireEvent(a,"DRAGUPDATE",[b]);0<b.time&&VMM.Element.animate(a,
b.time,"easeOutExpo",{left:b.left})},getLeft:function(a){return parseInt(VMM.Element.css(a,"left").substring(0,VMM.Element.css(a,"left").length-2),10)}};VMM.Browser={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version";this.OS=this.searchString(this.dataOS)||"an unknown OS";this.device=this.searchDevice(navigator.userAgent)},searchDevice:function(a){return a.match(/Android/i)||
a.match(/iPhone|iPod/i)?"mobile":a.match(/iPad/i)?"tablet":a.match(/BlackBerry/i)||a.match(/IEMobile/i)?"other mobile":"desktop"},searchString:function(a){for(var b=0;b<a.length;b++){var c=a[b].string,d=a[b].prop;this.versionSearchString=a[b].versionSearch||a[b].identity;if(c){if(-1!=c.indexOf(a[b].subString))return a[b].identity}else if(d)return a[b].identity}},searchVersion:function(a){var b=a.indexOf(this.versionSearchString);return-1==b?void 0:parseFloat(a.substring(b+this.versionSearchString.length+
1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},
{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",
identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.userAgent,subString:"iPad",identity:"iPad"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};VMM.Browser.init();VMM.MediaElement={init:function(){return this},thumbnail:function(a,b,c){_h=_w=32;null!=b&&""!=b&&(_w=b);null!=c&&""!=c&&(_h=c);if(null!=a.media&&""!=a.media){_valid=!0;b="";b={};b=VMM.MediaType(a.media);if("image"==b.type)return b="<div class='thumbnail'><img src='"+
b.id+"' width='"+_w+"px' height='"+_h+"px'></div>";if("flickr"==b.type)return b="<div class='thumbnail'><img id='flickr_"+b.id+"_thumb' width='"+_w+"px' height='"+_h+"px'></div>";if("youtube"==b.type)return"<div class='thumbnail youtube'></div>";if("googledoc"!=b.type)return b="vimeo"==b.type?"<div class='thumbnail vimeo'></div>":"twitter"==b.type?"<div class='thumbnail twitter'></div>":"twitter-ready"==b.type?"<div class='thumbnail twitter'></div>":"soundcloud"==b.type?"<div class='thumbnail soundcloud'></div>":
"google-map"==b.type?"<div class='thumbnail map'></div>":"unknown"==b.type?"":"website"==b.type?"<div class='thumbnail website'></div>":"<div class='thumbnail'></div>"}},create:function(a,b,c,d,e){_return=c;_w=500;_h=400;$mediacontainer=a;null!=d&&""!=d&&(_w=d);null!=e&&""!=e&&(_h=e);if(null!=b.media&&""!=b.media){var d=c=a="",e={},f=!1;null!=b.credit&&""!=b.credit&&(d="<div class='credit'>"+VMM.Util.linkify_with_twitter(b.credit,"_blank")+"</div>");null!=b.caption&&""!=b.caption&&(c="<div class='caption'>"+
VMM.Util.linkify_with_twitter(b.caption,"_blank")+"</div>");e=VMM.MediaType(b.media);"image"==e.type?a="<img src='"+e.id+"'>":"flickr"==e.type?(b="flickr_"+e.id,a="<a href='"+e.link+"' target='_blank'><img id='"+b+"_large'></a>",VMM.ExternalAPI.flickr.getPhoto(e.id,"#"+b)):"googledoc"==e.type?a=e.id.match(/docs.google.com/i)?"<iframe class='media-frame doc' frameborder='0' width='100%' height='100%' src='"+e.id+"&embedded=true'></iframe>":"<iframe class='media-frame doc' frameborder='0' width='100%' height='100%' src='http://docs.google.com/viewer?url="+
e.id+"&embedded=true'></iframe>":"youtube"==e.type?(a="<div class='media-frame video youtube' id='youtube_"+e.id+"'>Loading YouTube video...</div>",VMM.ExternalAPI.youtube.init(e.id)):"vimeo"==e.type?a="<iframe class='media-frame video vimeo' frameborder='0' width='100%' height='100%' src='http://player.vimeo.com/video/"+e.id+"?title=0&amp;byline=0&amp;portrait=0&amp;color=ffffff'></iframe>":"twitter"==e.type?(a="<div class='twitter' id='twitter_"+e.id+"'>Loading Tweet</div>",trace("TWITTER"),VMM.ExternalAPI.twitter.prettyHTML(e.id),
f=!0):"twitter-ready"==e.type?a=e.id:"soundcloud"==e.type?(b="soundcloud_"+VMM.Util.unique_ID(5),a="<div class='media-frame soundcloud' id='"+b+"'>Loading Sound</div>",VMM.ExternalAPI.soundcloud.getSound(e.id,b)):"google-map"==e.type?(b="googlemap_"+VMM.Util.unique_ID(7),a="<div class='media-frame map' id='"+b+"'>Loading Map...</div>",VMM.ExternalAPI.googlemaps.getMap(e.id,b)):"unknown"==e.type?(trace("NO KNOWN MEDIA TYPE FOUND TRYING TO JUST PLACE THE HTML"),a=VMM.Util.properQuotes(e.id)):"website"==
e.type?a="<iframe class='media-frame' frameborder='0' width='100%' height='100%' scrolling='yes' marginheight='0' marginwidth='0' src='"+e.id+"'></iframe>":(trace("NO KNOWN MEDIA TYPE FOUND"),trace(e.type));a="<div class='media-container' >"+a+d+c+"</div>";if(_return)return f?"<div class='media text-media'><div class='media-wrapper'>"+a+"</div></div>":"<div class='media'><div class='media-wrapper'>"+a+"</div></div>";VMM.appendElement($mediacontainer,a);VMM.appendElement($mediacontainer,d);VMM.appendElement($mediacontainer,
c)}}}.init();VMM.MediaType=function(a){var b={};a.match("div class='twitter'")?(b.type="twitter-ready",b.id=a):a.match("(www.)?youtube|youtu.be")?(youtube_id=a.match("embed")?a.split(/embed\//)[1].split('"')[0]:a.split(/v\/|v=|youtu\.be\//)[1].split(/[?&]/)[0],b.type="youtube",b.id=youtube_id):a.match("(player.)?vimeo.com")?(vimeo_id=a.split(/video\/|\/\/vimeo\.com\//)[1].split(/[?&]/)[0],b.type="vimeo",b.id=vimeo_id):a.match("(player.)?soundcloud.com")?(b.type="soundcloud",b.id=a):a.match("(www.)?twitter.com")?
(trace("TWITTER MATCH"),twitter_id=a.match("status/")?a.split("status/")[1]:a.match("statuses/")?a.split("statuses/")[1]:"",b.type="twitter",b.id=twitter_id):a.match("maps.google")?(b.type="google-map",b.id=a.split(/src=['|"][^'|"]*?['|"]/gi)):a.match("flickr.com/photos")?(b.type="flickr",b.id=a.split("photos/")[1].split("/")[1],b.link=a):(a.match(/jpg|jpeg|png|gif/i)?b.type="image":VMM.FileExtention.googleDocType(a)?b.type="googledoc":0==a.indexOf("http://")?b.type="website":(trace("unknown media"),
b.type="unknown"),b.id=a);return b};VMM.FileExtention={googleDocType:function(a){for(var b="",b=a.substr(a.length-5,5),c="DOC,DOCX,XLS,XLSX,PPT,PPTX,PDF,PAGES,AI,PSD,TIFF,DXF,SVG,EPS,PS,TTF,XPS,ZIP,RAR".split(","),d=!1,e=0;e<c.length;e++)if(b.toLowerCase().match(c[e].toString().toLowerCase())||a.match("docs.google.com"))d=!0;return d}};VMM.ExternalAPI={twitter:{tweetArray:[],getHTML:function(a){VMM.getJSON("http://api.twitter.com/1/statuses/oembed.json?id="+a+"&callback=?",VMM.ExternalAPI.twitter.onJSONLoaded)},
onJSONLoaded:function(a){trace("TWITTER JSON LOADED");VMM.attachElement("#"+a.id,VMM.Util.linkify_with_twitter(a.html))},parseTwitterDate:function(a){return new Date(Date.parse(a))},prettyParseTwitterDate:function(a){a=new Date(Date.parse(a));return VMM.Util.date.prettyDate(a,!0)},getTweets:function(a){for(var b=[],c=a.length,d=0;d<a.length;d++){var e="",e=a[d].tweet.match("status/")?a[d].tweet.split("status/")[1]:a[d].tweet.match("statuses/")?a[d].tweet.split("statuses/")[1]:"";VMM.getJSON("http://api.twitter.com/1/statuses/show.json?id="+
e+"&include_entities=true&callback=?",function(a){var d={},e="<div class='twitter'><blockquote><p>",l=VMM.Util.linkify_with_twitter(a.text,"_blank"),e=e+l+"</p>"+("— "+a.user.name+" (<a href='https://twitter.com/"+a.user.screen_name+"'>@"+a.user.screen_name+"</a>) <a href='https://twitter.com/"+a.user.screen_name+"/status/"+a.id+"'>"+VMM.ExternalAPI.twitter.prettyParseTwitterDate(a.created_at)+" </a></blockquote></div>");d.content=e;d.raw=a;b.push(d);b.length==c&&VMM.fireEvent(global,"TWEETSLOADED",
{tweetdata:b})}).success(function(){trace("second success")}).error(function(){trace("error")}).complete(function(){trace("complete")})}},getTweetSearch:function(a,b){var c=40;null!=b&&""!=b&&(c=b);var d=[];VMM.getJSON("http://search.twitter.com/search.json?q="+a+"&rpp="+c+"&include_entities=true&result_type=mixed",function(a){for(var b=0;b<a.results.length;b++){var c={},j="<div class='twitter'><blockquote><p>",l=VMM.Util.linkify_with_twitter(a.results[b].text,"_blank"),j=j+l,j=j+"</p>",j=j+("— "+
a.results[b].from_user_name+" (<a href='https://twitter.com/"+a.results[b].from_user+"'>@"+a.results[b].from_user+"</a>) <a href='https://twitter.com/"+a.results[b].from_user+"/status/"+a.id+"'>"+VMM.ExternalAPI.twitter.prettyParseTwitterDate(a.results[b].created_at)+" </a></blockquote></div>");c.content=j;c.raw=a.results[b];d.push(c)}VMM.fireEvent(global,"TWEETSLOADED",{tweetdata:d})})},prettyHTML:function(a){var a=a.toString(),b="http://api.twitter.com/1/statuses/show.json?id="+a+"&include_entities=true&callback=?";
trace("id "+a);var c=setTimeout(VMM.ExternalAPI.twitter.notFoundError,4E3,a);VMM.getJSON(b,VMM.ExternalAPI.twitter.formatJSON).error(function(b,c){trace("TWITTER error");trace("TWITTER ERROR: "+c+" "+b.responseText);VMM.attachElement("#twitter_"+a,"<p>ERROR LOADING TWEET "+a+"</p>")}).success(function(){clearTimeout(c)})},notFoundError:function(a){trace("TWITTER JSON ERROR TIMEOUT "+a);VMM.attachElement("#twitter_"+a,"<p>TWEET NOT FOUND "+a+"</p>")},formatJSON:function(a){trace("TWITTER JSON LOADED F");
trace(a);var b=a.id_str,c="<blockquote><p>",d=VMM.Util.linkify_with_twitter(a.text,"_blank"),c=c+d+"</p></blockquote>"+(" <a href='https://twitter.com/"+a.user.screen_name+"/status/"+a.id+"' target='_blank' alt='link to original tweet' title='link to original tweet'><span class='created-at'></span> </a>"),c=c+"<div class='vcard author'>"+("<a class='screen-name url' href='https://twitter.com/"+a.user.screen_name+"' data-screen-name='"+a.user.screen_name+"' target='_blank'>"),c=c+("<span class='avatar'><img src=' "+
a.user.profile_image_url+"'  alt=''></span>"),c=c+("<span class='fn'>"+a.user.name+"</span>"),c=c+("<span class='nickname'>@"+a.user.screen_name+"</span>");VMM.attachElement("#twitter_"+b.toString(),c+"</a></div>")}},googlemaps:{getMap:function(a,b){var c=VMM.Util.getUrlVars(a);trace(c);var d="http://maps.googleapis.com/maps/api/js?key="+Aes.Ctr.decrypt(VMM.master_config.keys.google,VMM.master_config.vp,256)+"&libraries=places&sensor=false&callback=VMM.ExternalAPI.googlemaps.onMapAPIReady",c={url:a,
vars:c,id:b};VMM.master_config.googlemaps.active?VMM.master_config.googlemaps.createMap(c):(VMM.master_config.googlemaps.que.push(c),VMM.master_config.googlemaps.api_loaded||VMM.LoadLib.js(d,function(){trace("Google Maps API Library Loaded")}))},onMapAPIReady:function(){VMM.master_config.googlemaps.map_active=!0;VMM.master_config.googlemaps.places_active=!0;VMM.ExternalAPI.googlemaps.onAPIReady()},onPlacesAPIReady:function(){VMM.master_config.googlemaps.places_active=!0;VMM.ExternalAPI.googlemaps.onAPIReady()},
onAPIReady:function(){if(!VMM.master_config.googlemaps.active&&VMM.master_config.googlemaps.map_active&&VMM.master_config.googlemaps.places_active){VMM.master_config.googlemaps.active=!0;for(var a=0;a<VMM.master_config.googlemaps.que.length;a++)VMM.ExternalAPI.googlemaps.createMap(VMM.master_config.googlemaps.que[a])}},map_subdomains:["","a.","b.","c.","d."],map_attribution:{stamen:"Map tiles by <a href='http://stamen.com'>Stamen Design</a>, under <a href='http://creativecommons.org/licenses/by/3.0'>CC BY 3.0</a>. Data by <a href='http://openstreetmap.org'>OpenStreetMap</a>, under <a href='http://creativecommons.org/licenses/by-sa/3.0'>CC BY SA</a>.",
apple:"Map data &copy; 2012  Apple, Imagery &copy; 2012 Apple"},map_providers:{toner:{url:"http://{S}tile.stamen.com/toner/{Z}/{X}/{Y}.png",minZoom:0,maxZoom:20,attribution:"stamen"},"toner-lines":{url:"http://{S}tile.stamen.com/toner-lines/{Z}/{X}/{Y}.png",minZoom:0,maxZoom:20,attribution:"stamen"},"toner-labels":{url:"http://{S}tile.stamen.com/toner-labels/{Z}/{X}/{Y}.png",minZoom:0,maxZoom:20,attribution:"stamen"},sterrain:{url:"http://{S}tile.stamen.com/terrain/{Z}/{X}/{Y}.jpg",minZoom:4,maxZoom:20,
attribution:"stamen"},apple:{url:"http://gsp2.apple.com/tile?api=1&style=slideshow&layers=default&lang=en_US&z={z}&x={x}&y={y}&v=9",minZoom:4,maxZoom:20,attribution:"apple"},watercolor:{url:"http://{S}tile.stamen.com/watercolor/{Z}/{X}/{Y}.jpg",minZoom:3,maxZoom:16,attribution:"stamen"}},createMap:function(a){function b(a){if(a in VMM.ExternalAPI.googlemaps.map_providers)return c=VMM.ExternalAPI.googlemaps.map_attribution[VMM.ExternalAPI.googlemaps.map_providers[a].attribution],VMM.ExternalAPI.googlemaps.map_providers[a];
throw'No such provider: "'+a+'"';}trace(VMM.ExternalAPI.googlemaps.stamen_map_attribution);var c="";google.maps.VeriteMapType=function(a){var c=b(a);return google.maps.ImageMapType.call(this,{getTileUrl:function(a,b){return[c.url.replace("{S}",VMM.ExternalAPI.googlemaps.map_subdomains[(b+a.x+a.y)%VMM.ExternalAPI.googlemaps.map_subdomains.length]).replace("{Z}",b).replace("{X}",a.x).replace("{Y}",a.y).replace("{z}",b).replace("{x}",a.x).replace("{y}",a.y)]},tileSize:new google.maps.Size(256,256),name:a,
minZoom:c.minZoom,maxZoom:c.maxZoom})};google.maps.VeriteMapType.prototype=new google.maps.ImageMapType("_");var d;d="string"==type.of(VMM.master_config.Timeline.maptype)?VMM.master_config.Timeline.maptype:"toner";var e=new google.maps.LatLng(41.875696,-87.624207),f,n=11,j=!1,l=!1;"string"==type.of(VMM.Util.getUrlVars(a.url).ll)?(j=!0,f=VMM.Util.getUrlVars(a.url).ll.split(","),e=new google.maps.LatLng(parseFloat(f[0]),parseFloat(f[1]))):"string"==type.of(VMM.Util.getUrlVars(a.url).sll)&&(j=!0,f=VMM.Util.getUrlVars(a.url).sll.split(","),
e=new google.maps.LatLng(parseFloat(f[0]),parseFloat(f[1])));"string"==type.of(VMM.Util.getUrlVars(a.url).z)&&(l=!0,n=parseFloat(VMM.Util.getUrlVars(a.url).z));f={zoom:n,disableDefaultUI:!0,mapTypeControl:!1,zoomControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL,position:google.maps.ControlPosition.TOP_RIGHT},center:e,mapTypeId:d,mapTypeControlOptions:{mapTypeIds:[d]}};var q=a.id.toString()+"_gmap";VMM.attachElement("#"+a.id,"<div class='google-map' id='"+q+"' style='width=100%;height=100%;'></div>");
var h=new google.maps.Map(document.getElementById(q),f);h.mapTypes.set(d,new google.maps.VeriteMapType(d));VMM.appendElement("#"+q,"<div class='map-attribution'><div class='attribution-text'>"+c+"</div></div>");(function(){var b=a.url+"&output=kml",b=b.replace("&output=embed",""),c=new google.maps.KmlLayer(b,{preserveViewport:!0});c.setMap(h);var d=new google.maps.InfoWindow;google.maps.event.addListenerOnce(c,"defaultviewport_changed",function(){j&&h.panTo(e);l?h.setZoom(n):h.fitBounds(c.getDefaultViewport())});
google.maps.event.addListener(c,"click",function(a){var b=a.featureData.description;trace(a.featureData.infoWindowHtml);d.setContent(b);d.open(h)})})()}},flickr:{getPhoto:function(a){a="http://api.flickr.com/services/rest/?method=flickr.photos.getSizes&api_key="+Aes.Ctr.decrypt(VMM.master_config.keys.flickr,VMM.master_config.vp,256)+"&photo_id="+a+"&format=json&jsoncallback=?";VMM.getJSON(a,VMM.ExternalAPI.flickr.setPhoto)},setPhoto:function(a){for(var b="flickr_"+a.sizes.size[0].url.split("photos/")[1].split("/")[1],
c=b+"_thumb",d,e=!1,f=0;f<a.sizes.size.length;f++)"Large"==a.sizes.size[f].label&&(e=!0,d=a.sizes.size[f].source);e||(d=a.sizes.size[a.sizes.size.length-1].source);a=a.sizes.size[0].source;VMM.Element.attr("#"+(b+"_large"),"src",d);VMM.Element.attr("#"+c,"src",a)}},soundcloud:{getSound:function(a,b){VMM.getJSON("http://soundcloud.com/oembed?url="+a+"&format=js&callback=?",function(a){VMM.attachElement("#"+b,a.html)})}},youtube:{init:function(a){VMM.master_config.youtube.active?VMM.master_config.youtube.createPlayer(a):
(VMM.master_config.youtube.que.push(a),VMM.master_config.youtube.api_loaded||VMM.LoadLib.js("http://www.youtube.com/player_api",function(){trace("YouTube API Library Loaded")}))},onAPIReady:function(){trace("YOUTUBE API READY");VMM.master_config.youtube.active=!0;for(var a=0;a<VMM.master_config.youtube.que.length;a++)VMM.ExternalAPI.youtube.createPlayer(VMM.master_config.youtube.que[a])},createPlayer:function(a){var b={active:!1,player:{},name:"youtube_"+a,playing:!1};b.player["youtube_"+a]=new YT.Player("youtube_"+
a,{height:"390",width:"640",playerVars:{enablejsapi:1,color:"white",showinfo:0,theme:"light",rel:0,origin:"http://timeline.verite.co"},videoId:a,events:{onReady:VMM.ExternalAPI.youtube.onPlayerReady,onStateChange:VMM.ExternalAPI.youtube.onStateChange}});VMM.master_config.youtube.array.push(b)},stopPlayers:function(){for(var a=0;a<VMM.master_config.youtube.array.length;a++)VMM.master_config.youtube.array[a].playing&&VMM.master_config.youtube.array[a].player[VMM.master_config.youtube.array[a].name].stopVideo()},
onStateChange:function(a){for(var b=0;b<VMM.master_config.youtube.array.length;b++)VMM.master_config.youtube.array[b].player[VMM.master_config.youtube.array[b].name]==a.target&&a.data==YT.PlayerState.PLAYING&&(VMM.master_config.youtube.array[b].playing=!0)},onPlayerReady:function(){}}};VMM.Media=function(a){var b={},c="",d="",e="";this.init=function(a){"undefined"!=typeof a?this.setData(a):trace("WAITING ON DATA")};this.setData=function(f){"undefined"!=typeof f?(b=f,c=VMM.appendAndGetElement(a,"<div>",
"media"),d=VMM.appendAndGetElement(c,"<div>","container"),e=VMM.appendAndGetElement(d,"<div>","media-container"),null!=b.media&&""!=b.media&&(f={},f=VMM.MediaType(b.media),"image"==f.type?VMM.appendElement(e,"<img src='"+f.id+"'>"):"youtube"==f.type?VMM.appendElement(e,"<iframe frameborder='0' src='http://www.youtube.com/embed/"+f.id+"?&rel=0&theme=light&showinfo=0&hd=1&autohide=0&color=white' allowfullscreen>"):"vimeo"==f.type&&VMM.appendElement(e,"<iframe frameborder='0' src='http://player.vimeo.com/video/"+
f.id+"?title=0&amp;byline=0&amp;portrait=0&amp;color=ffffff'>"),null!=b.credit&&""!=b.credit&&VMM.appendElement(d,VMM.createElement("div",b.credit,"credit")),null!=b.caption&&""!=b.caption&&VMM.appendElement(d,VMM.createElement("div",b.caption,"caption")))):trace("NO DATA")}};VMM.Media.prototype.height=function(a){if(null!=a&&""!=a)config.height=a,reSize();else return config.height};VMM.Media.prototype.width=function(a){if(null!=a&&""!=a)config.width=a,reSize();else return config.width};VMM.Media.prototype.getData=
function(){return data};VMM.Media.prototype.setConfig=function(a){"undefined"!=typeof a?config=a:trace("NO CONFIG DATA")};VMM.Media.prototype.getConfig=function(){return config};VMM.Media.prototype.setSize=function(a,b){null!=a&&(config.width=a);null!=b&&(config.height=b);_active&&reSize()};VMM.Media.prototype.active=function(){return _active}}function trace(a){window.console?console.log(a):"undefined"!=typeof jsTrace&&jsTrace.send(a)}
Date.prototype.getWeek=function(){var a=new Date(this.getFullYear(),0,1);return Math.ceil(((this-a)/864E5+a.getDay()+1)/7)};Date.prototype.getDayOfYear=function(){var a=new Date(this.getFullYear(),0,1);return Math.ceil((this-a)/864E5)};
var is={Null:function(a){return null===a},Undefined:function(a){return void 0===a},nt:function(a){return null===a||void 0===a},Function:function(a){return"function"===typeof a?null!==a.constructor.toString().match(/Function/):!1},String:function(a){return"string"===typeof a?!0:"object"===typeof a?null!==a.constructor.toString().match(/string/i):!1},Array:function(a){return"object"===typeof a?null!==a.constructor.toString().match(/array/i)||void 0!==a.length:!1},Boolean:function(a){return"boolean"===
typeof a?!0:"object"===typeof a?null!==a.constructor.toString().match(/boolean/i):!1},Date:function(a){return"date"===typeof a?!0:"object"===typeof a?null!==a.constructor.toString().match(/date/i):!1},HTML:function(a){return"object"===typeof a?null!==a.constructor.toString().match(/html/i):!1},Number:function(a){return"number"===typeof a?!0:"object"===typeof a?null!==a.constructor.toString().match(/Number/):!1},Object:function(a){return"object"===typeof a?null!==a.constructor.toString().match(/object/i):
!1},RegExp:function(a){return"function"===typeof a?null!==a.constructor.toString().match(/regexp/i):!1}},type={of:function(a){for(var b in is)if(is[b](a))return b.toLowerCase()}};function onYouTubePlayerAPIReady(){trace("GLOBAL YOUTUBE API CALLED");VMM.ExternalAPI.youtube.onAPIReady()}
"undefined"!=typeof jQuery&&(jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(a,b,c,d,e){return jQuery.easing[jQuery.easing.def](a,b,c,d,e)},easeInExpo:function(a,b,c,d,e){return 0==b?c:d*Math.pow(2,10*(b/e-1))+c},easeOutExpo:function(a,b,c,d,e){return b==e?c+d:d*(-Math.pow(2,-10*b/e)+1)+c},easeInOutExpo:function(a,b,c,d,e){return 0==b?c:b==e?c+d:1>(b/=e/2)?d/2*Math.pow(2,10*(b-1))+c:d/2*(-Math.pow(2,-10*--b)+2)+c},easeInQuad:function(a,b,c,d,
e){return d*(b/=e)*b+c},easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c},easeInOutQuad:function(a,b,c,d,e){return 1>(b/=e/2)?d/2*b*b+c:-d/2*(--b*(b-2)-1)+c}}));
"undefined"!=typeof VMM&&"undefined"==typeof VMM.Slider&&(VMM.Slider=function(a,b,c,d){var e,f,n,j,l,q,h,r;function z(a,b){var c=!0,d=!1;null!=a&&(c=a);null!=b&&(d=b);B=m.width;m.nav_height=VMM.Element.height(e);m.content_width=B-2*m.content_padding;VMM.Element.width(D,i.length*m.content_width);d&&(d=VMM.Element.position(i[t]),VMM.Element.css(x,"left",d.left));VMM.Element.css(".slider-item","width",m.content_width);VMM.Element.height(".slider-item",m.height);VMM.Element.css(".slider-item .layout-text-media .media .media-container img",
"max-height",m.height-50);VMM.Element.css(".slider-item .layout-media .media .media-container img","max-height",m.height-150);VMM.Element.css(".slider-item .media .media-container .soundcloud","max-height",168);var d=Math.round(m.height)-160,g=Math.round(16*(d/9)),h=60*(m.content_width/100),k=Math.round(9*(h/16))+25;VMM.Element.height(".slider-item .media .media-container .media-frame",k);VMM.Element.width(".slider-item .media .media-container .media-frame",h);VMM.Element.height(".slider-item .layout-media .media .media-container .media-frame",
d);VMM.Element.width(".slider-item .layout-media .media .media-container .media-frame",g);VMM.Element.height(".slider-item .layout-media .media .media-container .soundcloud",m.height-150);VMM.Element.width(".slider-item .layout-media .media .media-container .soundcloud",m.content_width);VMM.Element.width(".slider-item .layout-text-media .media .media-container .soundcloud",h);VMM.Element.height(".slider-item .media .media-container .map",d);VMM.Element.css(".slider-item .layout-text-media .media .media-container .media-frame",
"max-width",m.content_width);for(g=d=0;g<i.length;g++)d=g*(m.width+m.spacing),VMM.Element.css(i[g],"left",d);VMM.Element.css(f,"left",B-m.nav_width);VMM.Element.height(n,m.height);VMM.Element.height(f,m.height);VMM.Element.css(j,"top",m.height/2-m.nav_height/2);VMM.Element.css(e,"top",m.height/2-m.nav_height/2);VMM.Element.height(u,m.height);VMM.Element.width(u,B);c&&A(t,"linear",1);0==t&&VMM.Element.visible(n,!1)}function s(){t==i.length-1?VMM.Element.animate(x,m.duration,m.ease,{left:-VMM.Element.position(i[t]).left}):
(A(t+1),VMM.fireEvent(k,"UPDATE"))}function p(){0==t?A(t):(A(t-1),VMM.fireEvent(k,"UPDATE"))}function o(a){switch(a.keyCode){case 39:s(a);break;case 37:p(a)}}function C(a,b){if(0==E.length)for(var c=0;c<i.length;c++){var d=VMM.Element.position(i[c]);E.push(d.left)}"number"==typeof b.left?(c=b.left,c<-VMM.Element.position(i[t]).left-m.width/3?s():c>-VMM.Element.position(i[t]).left+m.width/3?p():VMM.Element.animate(x,m.duration,m.ease,{left:-VMM.Element.position(i[t]).left})):VMM.Element.animate(x,
m.duration,m.ease,{left:-VMM.Element.position(i[t]).left});"number"==typeof b.top&&VMM.Element.animate(x,m.duration,m.ease,{top:-b.top})}var g=[],i=[],t=0,B=960,E=[],m={interval:10,something:0,width:720,height:400,content_width:720,content_height:400,content_padding:130,ease:"easeInOutExpo",duration:1E3,nav_width:100,nav_height:200,timeline:!1,spacing:15};null!=b&&""!=b&&(m.width=b);null!=c&&""!=c&&(m.height=c);null!=d&&""!=d&&(m.timeline=d);var v=!1,y="",u="",x="",D="";e=void 0;f=void 0;n=void 0;
j=void 0;l=void 0;q=void 0;h=void 0;r=void 0;f;n;l;q;h;r;this.ver="0.1";var k=a;this.init=function(a){"undefined"!=typeof a?this.setData(a):trace("WAITING ON DATA")};this.width=function(a){if(null!=a&&""!=a)m.width=a,z();else return m.width};this.height=function(a){if(null!=a&&""!=a)m.height=a,z();else return m.height};this.setData=function(a){if("undefined"!=typeof a){g=a;VMM.attachElement(k,"");y=VMM.getElement("div.slider");u=VMM.appendAndGetElement(y,"<div>","slider-container-mask");x=VMM.appendAndGetElement(u,
"<div>","slider-container");D=VMM.appendAndGetElement(x,"<div>","slider-item-container");f=VMM.appendAndGetElement(y,"<div>","nav-next");n=VMM.appendAndGetElement(y,"<div>","nav-previous");j=VMM.appendAndGetElement(f,"<div>","nav-container","<div class='icon'>&nbsp;</div>");e=VMM.appendAndGetElement(n,"<div>","nav-container","<div class='icon'>&nbsp;</div>");m.timeline&&(l=VMM.appendAndGetElement(j,"<div>","date",""),q=VMM.appendAndGetElement(e,"<div>","date",""));h=VMM.appendAndGetElement(j,
"<div>","title","Title Goes Here");r=VMM.appendAndGetElement(e,"<div>","title","Title Goes Here");VMM.bindEvent(".nav-next",s);VMM.bindEvent(".nav-previous",p);VMM.bindEvent(window,o,"keydown");a=g;VMM.attachElement(D,"");for(var b=0;b<a.length;b++){var c="",c=VMM.createElement("div",a[b].content,"content"),c=VMM.appendAndGetElement(D,"<div>","slider-item",c);i.push(c)}a=3E3;if("tablet"==VMM.Browser.device||"mobile"==VMM.Browser.device)m.duration=500,a=1E3,VMM.TouchSlider.createPanel(x,x,VMM.Element.width(i[0]),
m.spacing,!0),VMM.bindEvent(x,C,"TOUCHUPDATE");z(!1,!0);VMM.Element.visible(n,!1);A(0,"easeOutExpo",a,!0,!0);v=!0}else trace("NO DATA")};this.getData=function(){return g};this.setConfig=function(a){"undefined"!=typeof a?m=a:trace("NO CONFIG DATA")};this.getConfig=function(){return m};this.setSize=function(a,b){null!=a&&(m.width=a);null!=b&&(m.height=b);v&&z()};this.active=function(){return v};this.getCurrentNumber=function(){return t};this.setSlide=function(a){A(a)};var A=function(a,b,c,d,e){VMM.ExternalAPI.youtube.stopPlayers();
t=a;var a=m.ease,u=m.duration,o=!1,j=!1;0==t&&(j=!0);t+1==i.length&&(o=!0);null!=b&&""!=b&&(a=b);null!=c&&""!=c&&(u=c);b=VMM.Element.position(i[t]);j?VMM.Element.visible(n,!1):(VMM.Element.visible(n,!0),m.timeline&&VMM.attachElement(q,g[t-1].dateDisplay),VMM.attachElement(r,VMM.Util.unlinkify(g[t-1].title)));o?VMM.Element.visible(f,!1):(VMM.Element.visible(f,!0),m.timeline&&VMM.attachElement(l,g[t+1].dateDisplay),VMM.attachElement(h,VMM.Util.unlinkify(g[t+1].title)));d?VMM.Element.css(x,"left",-(b.left-
m.content_padding)):(VMM.Element.stop(x),VMM.Element.animate(x,u,a,{left:-(b.left-m.content_padding)}));e&&VMM.fireEvent(k,"LOADED");VMM.Element.height(i[t])>m.height?VMM.Element.css(".slider","overflow-y","scroll"):(VMM.Element.css(k,"overflow-y","hidden"),VMM.Element.animate(k,u,a,{scrollTop:VMM.Element.prop(k,"scrollHeight")-VMM.Element.height(k)}))}});
if("undefined"!=typeof VMM&&"undefined"==typeof VMM.Util){VMM.Util={init:function(){return this},randomBetween:function(a,b){return Math.floor(Math.random()*(b-a+1)+a)},customSort:function(a,b){return a==b?0:a>b?1:-1},number2money:function(a,b,c){b=null!==b?b:!0;c=null!==c?c:!1;a=this.niceNumber(VMM.Math2.floatPrecision(a,2));!a.split(/\./g)[1]&&c&&(a+=".00");b&&(a="$"+a);return a},wordCount:function(a){var a=a+" ",b=a.replace(/^[^A-Za-z0-9\'\-]+/gi,"").replace(/[^A-Za-z0-9\'\-]+/gi," ").split(" ").length-
1;2>a.length&&(b=0);return b},parseDate:function(a){var b;if(a.match(/,/gi)){a=a.split(",");for(b=0;b<a.length;b++)a[b]=parseInt(a[b]);b=new Date;a[0]&&b.setFullYear(a[0]);1<a[1]?b.setMonth(a[1]-1):b.setMonth(0);1<a[2]?b.setDate(a[2]):b.setDate(1);1<a[3]?b.setHours(a[3]):b.setHours(0);1<a[4]?b.setMinutes(a[4]):b.setMinutes(0);1<a[5]?b.setSeconds(a[5]):b.setSeconds(0);1<a[6]?b.setMilliseconds(a[6]):b.setMilliseconds(0)}else a.match("/")?b=new Date(a):5>a.length?(b=new Date,b.setFullYear(parseInt(a)),
b.setMonth(0),b.setDate(1),b.setHours(0),b.setMinutes(0),b.setSeconds(0),b.setMilliseconds(0)):b=new Date(parseInt(a.slice(0,4)),parseInt(a.slice(4,6))-1,parseInt(a.slice(6,8)),parseInt(a.slice(8,10)),parseInt(a.slice(10,12)));return b},ratio:{r16_9:function(a,b){if(null!==a&&""!==a)return Math.round(9*(b/16));if(null!==b&&""!==b)return Math.round(16*(a/9))},r4_3:function(a,b){if(null!==a&&""!==a)return Math.round(3*(b/4));if(null!==b&&""!==b)return Math.round(4*(a/3))}},date:{dateformats:{year:"yyyy",
month_short:"mmm",month:"mmmm yyyy",full_short:"mmm d",full:"mmmm d',' yyyy",time_no_seconds_short:"hh:MM TT",time_no_seconds_small_date:"hh:MM TT'<br/><small>'mmmm d',' yyyy'</small>'",full_long:"dddd',' mmm d',' yyyy 'at' hh:MM TT",full_long_small_date:"hh:MM TT'<br/><small>'dddd',' mmm d',' yyyy'</small>'"},month:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),month_abbr:"Jan.,Feb.,March,April,May,June,July,Aug.,Sept.,Oct.,Nov.,Dec.".split(","),
day:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),day_abbr:"Sun.,Mon.,Tues.,Wed.,Thurs.,Fri.,Sat.".split(","),hour:[1,2,3,4,5,6,7,8,9,10,11,12,1,2,3,4,5,6,7,8,9,10,11,12],hour_suffix:["am"],setLanguage:function(a){trace("SET DATE LANGUAGE");VMM.Util.date.dateformats=a.dateformats;VMM.Util.date.month=a.date.month;VMM.Util.date.month_abbr=a.date.month_abbr;VMM.Util.date.day=a.date.day;VMM.Util.date.day_abbr=a.date.day_abbr;dateFormat.i18n.dayNames=a.date.day_abbr.concat(a.date.day);
dateFormat.i18n.monthNames=a.date.month_abbr.concat(a.date.month)},prettyDate:function(a,b){var c="";"date"==type.of(a)?c=0===a.getMonth()&&1==a.getDate()&&0===a.getHours()&&0===a.getMinutes()?b?dateFormat(a,VMM.Util.date.dateformats.full_short):dateFormat(a,VMM.Util.date.dateformats.full):1>=a.getDate()&&0===a.getHours()&&0===a.getMinutes()?b?dateFormat(a,VMM.Util.date.dateformats.full_short):dateFormat(a,VMM.Util.date.dateformats.full):0===a.getHours()&&0===a.getMinutes()?b?dateFormat(a,VMM.Util.date.dateformats.full_short):
dateFormat(a,VMM.Util.date.dateformats.full):0===a.getMinutes()?b?dateFormat(a,VMM.Util.date.dateformats.time_no_seconds_short):dateFormat(a,VMM.Util.date.dateformats.time_no_seconds_small_date):dateFormat(a,VMM.Util.date.dateformats.full_long):(trace("NOT A VALID DATE?"),trace(a));return c}},doubledigit:function(a){return(10>a?"0":"")+a},truncateWords:function(a,b,c){b||(b=30);c||(c=b);for(var a=a.replace(/^[^A-Za-z0-9\'\-]+/gi,"").split(" "),d=[],b=Math.min(a.length,b),c=Math.min(a.length,c),e=
0;e<b;e++)d.push(a[e]);for(;e<c&&!(b=a[e],d.push(b),"."==b.charAt(b.length-1));e++);return d.join(" ")},linkify:function(a){return a.replace(/\b(?:https?|ftp):\/\/[a-z0-9-+&@#\/%?=~_|!:,.;]*[a-z0-9-+&@#\/%=~_|]/gim,"<a target='_blank' href='$&' onclick='void(0)'>$&</a>").replace(/(^|[^\/])(www\.[\S]+(\b|$))/gim,"$1<a target='_blank' onclick='void(0)' href='http://$2'>$2</a>").replace(/(([a-zA-Z0-9_\-\.]+)@[a-zA-Z_]+?(?:\.[a-zA-Z]{2,6}))+/gim,"<a target='_blank' onclick='void(0)' href='mailto:$1'>$1</a>")},
linkify_with_twitter:function(a){return a.replace(/(\()((?:ht|f)tps?:\/\/[a-z0-9\-._~!$&'()*+,;=:\/?#[\]@%]+)(\))|(\[)((?:ht|f)tps?:\/\/[a-z0-9\-._~!$&'()*+,;=:\/?#[\]@%]+)(\])|(\{)((?:ht|f)tps?:\/\/[a-z0-9\-._~!$&'()*+,;=:\/?#[\]@%]+)(\})|(<|&(?:lt|#60|#x3c);)((?:ht|f)tps?:\/\/[a-z0-9\-._~!$&'()*+,;=:\/?#[\]@%]+)(>|&(?:gt|#62|#x3e);)|((?:^|[^=\s'"\]])\s*['"]?|[^=\s]\s+)(\b(?:ht|f)tps?:\/\/[a-z0-9\-._~!$'()*+,;=:\/?#[\]@%]+(?:(?!&(?:gt|#0*62|#x0*3e);|&(?:amp|apos|quot|#0*3[49]|#x0*2[27]);[.!&',:?;]?(?:[^a-z0-9\-._~!$&'()*+,;=:\/?#[\]@%]|$))&[a-z0-9\-._~!$'()*+,;=:\/?#[\]@%]*)*[a-z0-9\-_~$()*+=\/#[\]@%])/img,
'$1$4$7$10$13<a href="$2$5$8$11$14">$2$5$8$11$14</a>$3$6$9$12').replace(/(^|[^\/])(www\.[\S]+(\b|$))/gim,"$1<a target='_blank' onclick='void(0)' href='http://$2'>$2</a>").replace(/(([a-zA-Z0-9_\-\.]+)@[a-zA-Z_]+?(?:\.[a-zA-Z]{2,6}))+/gim,"<a target='_blank' onclick='void(0)' href='mailto:$1'>$1</a>").replace(/(@([\w]+))/g,"<a href='http://twitter.com/$2' target='_blank' onclick='void(0)'>$1</a>").replace(/(#([\w]+))/g,"<a href='http://twitter.com/#search?q=%23$2' target='_blank' 'void(0)'>$1</a>")},
unlinkify:function(a){if(!a)return a;a=a.replace(/<a\b[^>]*>/i,"");return a=a.replace(/<\/a>/i,"")},nl2br:function(a){return a.replace(/(\r\n|[\r\n]|\\n|\\r)/g,"<br/>")},unique_ID:function(a){for(var b="",c=0;c<a;c++)b+="abcdefghijklmnopqurstuvwxyzABCDEFGHIJKLMNOPQURSTUVWXYZ".substr(Math.floor(62*Math.random()),1);return b},isEven:function(a){return 0===a%2?!0:!1},getUrlVars:function(a){var b=a.toString();b.match("&#038;")?b=b.replace("&#038;","&"):b.match("&#38;")?b=b.replace("&#38;","&"):b.match("&amp;")&&
(b=b.replace("&amp;","&"));for(var a=[],c=b.slice(b.indexOf("?")+1).split("&"),d=0;d<c.length;d++)b=c[d].split("="),a.push(b[0]),a[b[0]]=b[1];return a},toHTML:function(a){a=this.nl2br(a);a=this.linkify(a);return a.replace(/\s\s/g,"&nbsp;&nbsp;")},toCamelCase:function(a,b){!1!==b&&(b=!0);for(var c=(b?a.toLowerCase():a).split(" "),d=0;d<c.length;d++)c[d]=c[d].substr(0,1).toUpperCase()+c[d].substr(1);return c.join(" ")},properQuotes:function(a){return a.replace(/\"([^\"]*)\"/gi,"&#8220;$1&#8221;")},
niceNumber:function(a){var a=""+Math.abs(Number(a)),b=a.split(/\./g)[0],a=a.split(/\./g)[1],c="",b=b.toArray();b.reverse();for(var d=1;d<=b.length;d++)c=0==d%3&&d<b.length?","+b[d-1]+c:b[d-1]+c;return null!=a&&""!=a&&void 0!=a?c+"."+a:c},toTitleCase:function(a){var b={__smallWords:"a,an,and,as,at,but,by,en,for,if,in,of,on,or,the,to,v[.]?,via,vs[.]?".split(","),init:function(){this.__smallRE=this.__smallWords.join("|");this.__lowerCaseWordsRE=RegExp("\\b("+this.__smallRE+")\\b","gi");this.__firstWordRE=
RegExp("^([^a-zA-Z0-9 \\r\\n\\t]*)("+this.__smallRE+")\\b","gi");this.__lastWordRE=RegExp("\\b("+this.__smallRE+")([^a-zA-Z0-9 \\r\\n\\t]*)$","gi")},toTitleCase:function(a){for(var b="",a=a.split(/([:.;?!][ ]|(?:[ ]|^)["“])/),e=0;e<a.length;++e)var f=a[e],f=f.replace(/\b([a-zA-Z][a-z.'’]*)\b/g,this.__titleCaseDottedWordReplacer),f=f.replace(this.__lowerCaseWordsRE,this.__lowerReplacer),f=f.replace(this.__firstWordRE,this.__firstToUpperCase),f=f.replace(this.__lastWordRE,this.__firstToUpperCase),b=
b+f;b=b.replace(/ V(s?)\. /g," v$1. ");b=b.replace(/(['’])S\b/g,"$1s");return b=b.replace(/\b(AT&T|Q&A)\b/ig,this.__upperReplacer)},__titleCaseDottedWordReplacer:function(a){return a.match(/[a-zA-Z][.][a-zA-Z]/)?a:b.__firstToUpperCase(a)},__lowerReplacer:function(a){return a.toLowerCase()},__upperReplacer:function(a){return a.toUpperCase()},__firstToUpperCase:function(a){a=a.split(/(^[^a-zA-Z0-9]*[a-zA-Z0-9])(.*)$/);a[1]=a[1].toUpperCase();return a.join("")}};b.init();a=a.replace(/_/g," ");return a=
b.toTitleCase(a)}}.init();String.linkify||(String.prototype.linkify=function(){return this.replace(/\b(?:https?|ftp):\/\/[a-z0-9-+&@#\/%?=~_|!:,.;]*[a-z0-9-+&@#\/%=~_|]/gim,'<a target="_blank" href="$&">$&</a>').replace(/(^|[^\/])(www\.[\S]+(\b|$))/gim,'$1<a target="_blank" href="http://$2">$2</a>').replace(/(([a-zA-Z0-9_\-\.]+)@[a-zA-Z_]+?(?:\.[a-zA-Z]{2,6}))+/gim,'<a target="_blank" href="mailto:$1">$1</a>').replace(/(@([\w]+))/g,"<a href='http://twitter.com/$2' target='_blank'>$1</a>").replace(/(#([\w]+))/g,
"<a href='http://twitter.com/#search?q=%23$2' target='_blank'>$1</a>")});var dateFormat=function(){var a=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,b=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,c=/[^-+\dA-Z]/g,d=function(a,b){a=""+a;for(b=b||2;a.length<b;)a="0"+a;return a};return function(e,f,n){var j=dateFormat;1==arguments.length&&"[object String]"==Object.prototype.toString.call(e)&&
!/\d/.test(e)&&(f=e,e=void 0);e=e?new Date(e):new Date;if(isNaN(e))throw SyntaxError("invalid date");f=""+(j.masks[f]||f||j.masks["default"]);"UTC:"==f.slice(0,4)&&(f=f.slice(4),n=!0);var l=n?"getUTC":"get",q=e[l+"Date"](),h=e[l+"Day"](),r=e[l+"Month"](),z=e[l+"FullYear"](),s=e[l+"Hours"](),p=e[l+"Minutes"](),o=e[l+"Seconds"](),l=e[l+"Milliseconds"](),C=n?0:e.getTimezoneOffset(),g={d:q,dd:d(q),ddd:j.i18n.dayNames[h],dddd:j.i18n.dayNames[h+7],m:r+1,mm:d(r+1),mmm:j.i18n.monthNames[r],mmmm:j.i18n.monthNames[r+
12],yy:(""+z).slice(2),yyyy:z,h:s%12||12,hh:d(s%12||12),H:s,HH:d(s),M:p,MM:d(p),s:o,ss:d(o),l:d(l,3),L:d(99<l?Math.round(l/10):l),t:12>s?"a":"p",tt:12>s?"am":"pm",T:12>s?"A":"P",TT:12>s?"AM":"PM",Z:n?"UTC":((""+e).match(b)||[""]).pop().replace(c,""),o:(0<C?"-":"+")+d(100*Math.floor(Math.abs(C)/60)+Math.abs(C)%60,4),S:["th","st","nd","rd"][3<q%10?0:(10!=q%100-q%10)*q%10]};return f.replace(a,function(a){return a in g?g[a]:a.slice(1,a.length-1)})}}();dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",
shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};dateFormat.i18n={dayNames:"Sun,Mon,Tue,Wed,Thu,Fri,Sat,Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),monthNames:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec,January,February,March,April,May,June,July,August,September,October,November,December".split(",")};
Date.prototype.format=function(a,b){return dateFormat(this,a,b)}}window.loadedJS=[];
"undefined"!=typeof VMM&&"undefined"==typeof VMM.LoadLib&&(VMM.LoadLib=function(a){function b(a){for(var b=!1,c=0;c<p.length;c++)p[c]==a&&(b=!0);b||p.push(a);return b}function c(b,c){var d=a.createElement(b),e;for(e in c)c.hasOwnProperty(e)&&d.setAttribute(e,c[e]);return d}function d(a){var b=h[a],c,d;b&&(c=b.callback,d=b.urls,d.shift(),r=0,d.length||(c&&c.call(b.context,b.obj),h[a]=null,z[a].length&&f(a)))}function e(){var b=navigator.userAgent;l={async:!0===a.createElement("script").async};(l.webkit=
/AppleWebKit\//.test(b))||(l.ie=/MSIE/.test(b))||(l.opera=/Opera/.test(b))||(l.gecko=/Gecko\//.test(b))||(l.unknown=!0)}function f(b,f,g,i,p){var s=function(){d(b)},r="css"===b,m=[],v,y,u,x;l||e();if(f)if(f="string"===typeof f?[f]:f.concat(),r||l.async||l.gecko||l.opera)z[b].push({urls:f,callback:g,obj:i,context:p});else for(v=0,y=f.length;v<y;++v)z[b].push({urls:[f[v]],callback:v===y-1?g:null,obj:i,context:p});if(!h[b]&&(x=h[b]=z[b].shift())){q||(q=a.head||a.getElementsByTagName("head")[0]);f=x.urls;
for(v=0,y=f.length;v<y;++v)g=f[v],r?u=l.gecko?c("style"):c("link",{href:g,rel:"stylesheet"}):(u=c("script",{src:g}),u.async=!1),u.className="lazyload",u.setAttribute("charset","utf-8"),l.ie&&!r?u.onreadystatechange=function(){/loaded|complete/.test(u.readyState)&&(u.onreadystatechange=null,s())}:r&&(l.gecko||l.webkit)?l.webkit?(x.urls[v]=u.href,j()):(u.innerHTML='@import "'+g+'";',n(u)):u.onload=u.onerror=s,m.push(u);for(v=0,y=m.length;v<y;++v)q.appendChild(m[v])}}function n(a){var b;try{b=!!a.sheet.cssRules}catch(c){r+=
1;200>r?setTimeout(function(){n(a)},50):b&&d("css");return}d("css")}function j(){var a=h.css,b;if(a){for(b=s.length;0<=--b;)if(s[b].href===a.urls[0]){d("css");break}r+=1;a&&(200>r?setTimeout(j,50):d("css"))}}var l,q,h={},r=0,z={css:[],js:[]},s=a.styleSheets,p=[];return{css:function(a,c,d,e){if(b(a))return c;f("css",a,c,d,e)},js:function(a,c,d,e){if(b(a))return c;f("js",a,c,d,e)}}}(this.document));
!function(a){var b=function(a,b){this.init("tooltip",a,b)};b.prototype={constructor:b,init:function(b,d,e){this.type=b;this.$element=a(d);this.options=this.getOptions(e);this.enabled=!0;"manual"!=this.options.trigger&&(b="hover"==this.options.trigger?"mouseenter":"focus",d="hover"==this.options.trigger?"mouseleave":"blur",this.$element.on(b,this.options.selector,a.proxy(this.enter,this)),this.$element.on(d,this.options.selector,a.proxy(this.leave,this)));this.options.selector?this._options=a.extend({},
this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(b){b=a.extend({},a.fn[this.type].defaults,b,this.$element.data());b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay});return b},enter:function(b){var d=a(b.currentTarget)[this.type](this._options).data(this.type);!d.options.delay||!d.options.delay.show?d.show():(d.hoverState="in",setTimeout(function(){"in"==d.hoverState&&d.show()},d.options.delay.show))},leave:function(b){var d=a(b.currentTarget)[this.type](this._options).data(this.type);
!d.options.delay||!d.options.delay.hide?d.hide():(d.hoverState="out",setTimeout(function(){"out"==d.hoverState&&d.hide()},d.options.delay.hide))},show:function(){var a,b,e,f,n,j,l;if(this.hasContent()&&this.enabled){a=this.tip();this.setContent();this.options.animation&&a.addClass("fade");j="function"==typeof this.options.placement?this.options.placement.call(this,a[0],this.$element[0]):this.options.placement;b=/in/.test(j);a.remove().css({top:0,left:0,display:"block"}).appendTo(b?this.$element:document.body);
e=this.getPosition(b);f=a[0].offsetWidth;n=a[0].offsetHeight;switch(b?j.split(" ")[1]:j){case "bottom":l={top:e.top+e.height,left:e.left+e.width/2-f/2};break;case "top":l={top:e.top-n,left:e.left+e.width/2-f/2};break;case "left":l={top:e.top+e.height/2-n/2,left:e.left-f};break;case "right":l={top:e.top+e.height/2-n/2,left:e.left+e.width}}a.css(l).addClass(j).addClass("in")}},setContent:function(){var a=this.tip();a.find(".tooltip-inner").html(this.getTitle());a.removeClass("fade in top bottom left right")},
hide:function(){function b(){var c=setTimeout(function(){d.off(a.support.transition.end).remove()},500);d.one(a.support.transition.end,function(){clearTimeout(c);d.remove()})}var d=this.tip();d.removeClass("in");a.support.transition&&this.$tip.hasClass("fade")?b():d.remove()},fixTitle:function(){var a=this.$element;if(a.attr("title")||"string"!=typeof a.attr("data-original-title"))a.attr("data-original-title",a.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},
getPosition:function(b){return a.extend({},b?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var a;a=this.$element;var b=this.options;a=a.attr("data-original-title")||("function"==typeof b.title?b.title.call(a[0]):b.title);return a=a.toString().replace(/(^\s*|\s*$)/,"")},tip:function(){return this.$tip=this.$tip||a(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.options=
this.$element=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass("in")?"hide":"show"]()}};a.fn.tooltip=function(c){return this.each(function(){var d=a(this),e=d.data("tooltip"),f="object"==typeof c&&c;e||d.data("tooltip",e=new b(this,f));if("string"==typeof c)e[c]()})};a.fn.tooltip.Constructor=b;a.fn.tooltip.defaults={animation:!0,delay:0,selector:!1,placement:"top",trigger:"hover",
title:"",template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>'}}(window.jQuery);var Aes={};
Aes.cipher=function(a,b){for(var c=b.length/4-1,d=[[],[],[],[]],e=0;16>e;e++)d[e%4][Math.floor(e/4)]=a[e];d=Aes.addRoundKey(d,b,0,4);for(e=1;e<c;e++)d=Aes.subBytes(d,4),d=Aes.shiftRows(d,4),d=Aes.mixColumns(d,4),d=Aes.addRoundKey(d,b,e,4);d=Aes.subBytes(d,4);d=Aes.shiftRows(d,4);d=Aes.addRoundKey(d,b,c,4);c=Array(16);for(e=0;16>e;e++)c[e]=d[e%4][Math.floor(e/4)];return c};
Aes.keyExpansion=function(a){for(var b=a.length/4,c=b+6,d=Array(4*(c+1)),e=Array(4),f=0;f<b;f++)d[f]=[a[4*f],a[4*f+1],a[4*f+2],a[4*f+3]];for(f=b;f<4*(c+1);f++){d[f]=Array(4);for(a=0;4>a;a++)e[a]=d[f-1][a];if(0==f%b){e=Aes.subWord(Aes.rotWord(e));for(a=0;4>a;a++)e[a]^=Aes.rCon[f/b][a]}else 6<b&&4==f%b&&(e=Aes.subWord(e));for(a=0;4>a;a++)d[f][a]=d[f-b][a]^e[a]}return d};Aes.subBytes=function(a,b){for(var c=0;4>c;c++)for(var d=0;d<b;d++)a[c][d]=Aes.sBox[a[c][d]];return a};
Aes.shiftRows=function(a,b){for(var c=Array(4),d=1;4>d;d++){for(var e=0;4>e;e++)c[e]=a[d][(e+d)%b];for(e=0;4>e;e++)a[d][e]=c[e]}return a};Aes.mixColumns=function(a){for(var b=0;4>b;b++){for(var c=Array(4),d=Array(4),e=0;4>e;e++)c[e]=a[e][b],d[e]=a[e][b]&128?a[e][b]<<1^283:a[e][b]<<1;a[0][b]=d[0]^c[1]^d[1]^c[2]^c[3];a[1][b]=c[0]^d[1]^c[2]^d[2]^c[3];a[2][b]=c[0]^c[1]^d[2]^c[3]^d[3];a[3][b]=c[0]^d[0]^c[1]^c[2]^d[3]}return a};
Aes.addRoundKey=function(a,b,c,d){for(var e=0;4>e;e++)for(var f=0;f<d;f++)a[e][f]^=b[4*c+f][e];return a};Aes.subWord=function(a){for(var b=0;4>b;b++)a[b]=Aes.sBox[a[b]];return a};Aes.rotWord=function(a){for(var b=a[0],c=0;3>c;c++)a[c]=a[c+1];a[3]=b;return a};
Aes.sBox=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,
126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22];
Aes.rCon=[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]];Aes.Ctr={};
Aes.Ctr.encrypt=function(a,b,c){if(!(128==c||192==c||256==c))return"";for(var a=Utf8.encode(a),b=Utf8.encode(b),d=c/8,e=Array(d),c=0;c<d;c++)e[c]=isNaN(b.charCodeAt(c))?0:b.charCodeAt(c);for(var e=Aes.cipher(e,Aes.keyExpansion(e)),e=e.concat(e.slice(0,d-16)),b=Array(16),c=(new Date).getTime(),d=c%1E3,f=Math.floor(c/1E3),n=Math.floor(65535*Math.random()),c=0;2>c;c++)b[c]=d>>>8*c&255;for(c=0;2>c;c++)b[c+2]=n>>>8*c&255;for(c=0;4>c;c++)b[c+4]=f>>>8*c&255;d="";for(c=0;8>c;c++)d+=String.fromCharCode(b[c]);
for(var e=Aes.keyExpansion(e),f=Math.ceil(a.length/16),n=Array(f),j=0;j<f;j++){for(c=0;4>c;c++)b[15-c]=j>>>8*c&255;for(c=0;4>c;c++)b[15-c-4]=j/4294967296>>>8*c;for(var l=Aes.cipher(b,e),q=j<f-1?16:(a.length-1)%16+1,h=Array(q),c=0;c<q;c++)h[c]=l[c]^a.charCodeAt(16*j+c),h[c]=String.fromCharCode(h[c]);n[j]=h.join("")}a=d+n.join("");return a=Base64.encode(a)};
Aes.Ctr.decrypt=function(a,b,c){if(!(128==c||192==c||256==c))return"";for(var a=Base64.decode(a),b=Utf8.encode(b),d=c/8,e=Array(d),c=0;c<d;c++)e[c]=isNaN(b.charCodeAt(c))?0:b.charCodeAt(c);e=Aes.cipher(e,Aes.keyExpansion(e));e=e.concat(e.slice(0,d-16));b=Array(8);ctrTxt=a.slice(0,8);for(c=0;8>c;c++)b[c]=ctrTxt.charCodeAt(c);for(var d=Aes.keyExpansion(e),e=Math.ceil((a.length-8)/16),c=Array(e),f=0;f<e;f++)c[f]=a.slice(8+16*f,16*f+24);for(var a=c,n=Array(a.length),f=0;f<e;f++){for(c=0;4>c;c++)b[15-
c]=f>>>8*c&255;for(c=0;4>c;c++)b[15-c-4]=(f+1)/4294967296-1>>>8*c&255;for(var j=Aes.cipher(b,d),l=Array(a[f].length),c=0;c<a[f].length;c++)l[c]=j[c]^a[f].charCodeAt(c),l[c]=String.fromCharCode(l[c]);n[f]=l.join("")}a=n.join("");return a=Utf8.decode(a)};
var Base64={code:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(a,b){var c,d,e,f,n=[],j="",l,q,h=Base64.code;q=("undefined"==typeof b?0:b)?a.encodeUTF8():a;l=q.length%3;if(0<l)for(;3>l++;)j+="=",q+="\x00";for(l=0;l<q.length;l+=3)c=q.charCodeAt(l),d=q.charCodeAt(l+1),e=q.charCodeAt(l+2),f=c<<16|d<<8|e,c=f>>18&63,d=f>>12&63,e=f>>6&63,f&=63,n[l/3]=h.charAt(c)+h.charAt(d)+h.charAt(e)+h.charAt(f);n=n.join("");return n=n.slice(0,n.length-j.length)+j},decode:function(a,
b){var b="undefined"==typeof b?!1:b,c,d,e,f,n,j=[],l,q=Base64.code;l=b?a.decodeUTF8():a;for(var h=0;h<l.length;h+=4)c=q.indexOf(l.charAt(h)),d=q.indexOf(l.charAt(h+1)),f=q.indexOf(l.charAt(h+2)),n=q.indexOf(l.charAt(h+3)),e=c<<18|d<<12|f<<6|n,c=e>>>16&255,d=e>>>8&255,e&=255,j[h/4]=String.fromCharCode(c,d,e),64==n&&(j[h/4]=String.fromCharCode(c,d)),64==f&&(j[h/4]=String.fromCharCode(c));f=j.join("");return b?f.decodeUTF8():f}},Utf8={encode:function(a){a=a.replace(/[\u0080-\u07ff]/g,function(a){a=a.charCodeAt(0);
return String.fromCharCode(192|a>>6,128|a&63)});return a=a.replace(/[\u0800-\uffff]/g,function(a){a=a.charCodeAt(0);return String.fromCharCode(224|a>>12,128|a>>6&63,128|a&63)})},decode:function(a){a=a.replace(/[\u00e0-\u00ef][\u0080-\u00bf][\u0080-\u00bf]/g,function(a){a=(a.charCodeAt(0)&15)<<12|(a.charCodeAt(1)&63)<<6|a.charCodeAt(2)&63;return String.fromCharCode(a)});return a=a.replace(/[\u00c0-\u00df][\u0080-\u00bf]/g,function(a){a=(a.charCodeAt(0)&31)<<6|a.charCodeAt(1)&63;return String.fromCharCode(a)})}};
"undefined"!=typeof VMM&&"undefined"==typeof VMM.Language&&(VMM.Language={date:{month:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),month_abbr:"Jan.,Feb.,March,April,May,June,July,Aug.,Sept.,Oct.,Nov.,Dec.".split(","),day:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),day_abbr:"Sun.,Mon.,Tues.,Wed.,Thurs.,Fri.,Sat.".split(",")},dateformats:{year:"yyyy",month_short:"mmm",month:"mmmm yyyy",full_short:"mmm d",full:"mmmm d',' yyyy",
time_no_seconds_short:"hh:MM TT",time_no_seconds_small_date:"hh:MM TT'<br/><small>'mmmm d',' yyyy'</small>'",full_long:"dddd',' mmm d',' yyyy 'at' hh:MM TT",full_long_small_date:"hh:MM TT'<br/><small>'dddd',' mmm d',' yyyy'</small>'"},messages:{loading_timeline:"Loading Timeline... ",return_to_title:"Return to Title",expand_timeline:"Expand Timeline",contract_timeline:"Contract Timeline"}});
"undefined"!=typeof VMM&&"undefined"==typeof VMM.Timeline&&(VMM.Timeline=function(a,b,c){function d(a,b){o=b.timeline;"array"!=type.of(o.era)&&(o.era=[]);y()}function e(){v();s.setSize(g.feature_width,g.feature_height);p.setSize(g.width,g.height);500>g.width?(VMM.Element.hide("div.navigation"),VMM.Element.hide("div.nav-next"),VMM.Element.hide("div.nav-previous"),VMM.Element.height(".slider-container-mask",g.height)):(VMM.Element.show("div.navigation"),VMM.Element.show("div.nav-next"),VMM.Element.show("div.nav-previous"),
VMM.Element.height(".slider-container-mask",g.feature_height))}function f(){g.loaded.slider=!0;n()}function n(){g.loaded.percentloaded+=25;g.loaded.slider&&g.loaded.timenav&&VMM.Element.animate(r,g.duration,4*g.ease,{opacity:0},B)}function j(){g.loaded.timenav=!0;n()}function l(){p.setMarker(s.getCurrentNumber(),g.ease,g.duration)}function q(){s.setSlide(p.getCurrentNumber())}trace("TIMELINE VERSION 0.92");var h=VMM.getElement("#timeline"),r,z=VMM.getElement("#timeline");r=VMM.appendAndGetElement(h,
"<div>","feedback","");VMM.appendAndGetElement(r,"<div>","messege","#Timeline");var s=new VMM.Slider("div.slider",720,400,!0),p=new VMM.Timeline.TimeNav("div.navigation",720,400,!0),o={},C=[],g=VMM.Timeline.Config;VMM.master_config.Timeline=VMM.Timeline.Config;g.maptype="toner";g.interval=10;g.something=0;g.width=960;g.height=540;g.spacing=15;g.loaded={slider:!1,timenav:!1,percentloaded:0};g.ease="easeInOutExpo";g.duration=1E3;null!=a&&""!=a?(g.width=a,VMM.Element.width(h,a)):g.width=VMM.Element.width(h);
null!=b&&""!=b?(g.height=b,VMM.Element.height(h,b)):g.height=VMM.Element.height(h);g.nav_width=g.width;g.nav_height=200;g.feature_width=g.width;g.feature_height="mobile"==VMM.Browser.device?g.height:g.height-g.nav_height;if("object"==typeof timeline_config){trace("HAS TIMELINE CONFIG");for(var i in timeline_config)Object.prototype.hasOwnProperty.call(timeline_config,i)&&(g[i]=timeline_config[i])}else if("object"==typeof c)for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(g[i]=c[i]);g.language=
VMM.Language;VMM.master_config.language=g.language;var t=!1;"MSIE"==VMM.Browser.browser&&7==parseInt(VMM.Browser.version,10)&&(t=!0);this.init=function(a){trace("TIMELINE INIT");VMM.Util.date.setLanguage(VMM.Timeline.Config.language);VMM.bindEvent(global,d,"DATAREADY");t?(r=VMM.appendAndGetElement(h,"<div>","feedback",""),VMM.appendAndGetElement(r,"<div>","messege","Internet Explorer 7 is not supported by #Timeline.")):("string"==type.of(a)?VMM.Timeline.DataObj.getData(a):VMM.Timeline.DataObj.getData(z),
r=VMM.appendAndGetElement(h,"<div>","feedback",""),VMM.appendAndGetElement(r,"<div>","messege",VMM.Timeline.Config.language.messages.loading_timeline))};this.iframeLoaded=function(){trace("iframeLoaded")};var B=function(){VMM.Element.detach(r)},E=function(){VMM.attachElement(h,"");VMM.appendElement(h,"<div class='container main'><div class='feature'><div class='slider'></div></div><div class='navigation'></div></div>");e();VMM.bindEvent("div.slider",f,"LOADED");VMM.bindEvent("div.navigation",j,"LOADED");
VMM.bindEvent("div.slider",l,"UPDATE");VMM.bindEvent("div.navigation",q,"UPDATE");s.init(C);p.init(C,o.era);VMM.bindEvent(global,e,"resize");VMM.bindEvent(global,function(a){a.preventDefault()},"touchmove")},m=function(a,b){v();var c="",d,e;e=d="";var f=!1,h=!1,i=!1;"date"==type.of(b)&&(f=!0,"start"!=a.type&&(d=null!=a.dateDisplay&&""!=a.dateDisplay?d+VMM.createElement("h2",a.dateDisplay,"date"):d+VMM.createElement("h2",VMM.Util.date.prettyDate(b),"date")),null!=a.headline&&""!=a.headline&&"tweets"!=
a.type&&(d="start"==a.type?d+VMM.createElement("h2",VMM.Util.linkify_with_twitter(a.headline,"_blank"),"start"):d+VMM.createElement("h3",VMM.Util.linkify_with_twitter(a.headline,"_blank"))),null!=a.text&&""!=a.text&&(i=!0,d+=VMM.createElement("p",VMM.Util.linkify_with_twitter(a.text,"_blank"))),d=VMM.createElement("div",d,"container"),d=VMM.createElement("div",d,"text"));f&&null!=a.asset&&""!=a.asset&&null!=a.asset.media&&""!=a.asset.media&&(h=!0,e=VMM.MediaElement.create("",a.asset,!0,g.feature_width,
g.feature_height));f&&(c="content-container layout",i&&(c+="-text"),h&&(c+="-media"),c=VMM.createElement("div",d+e,c));return c},v=function(){g.width=VMM.Element.width(h);g.height=VMM.Element.height(h);g.nav_width=g.width;g.feature_width=g.width;g.feature_height="mobile"==VMM.Browser.device?g.height:g.height-g.nav_height-3},y=function(){v();if(null!=o.headline&&""!=o.headline&&null!=o.text&&""!=o.text){trace("HAS STARTPAGE");var a={};"google spreadsheet"==o.type?(trace("google spreadsheet startpage date"+
o.startDate),a.startdate=new Date(Date.parse(o.startDate)),trace(a.startdate)):a.startdate=VMM.Util.parseDate(o.startDate);a.uniqueid=VMM.Util.unique_ID(5);a.enddate=a.startdate;a.title=o.headline;a.headline=o.headline;a.text=o.text;a.type="start";a.date=VMM.Util.date.prettyDate(o.startDate);a.asset=o.asset;a.fulldate=a.startdate.getTime();a.content=m(a,a.startdate);null!=a.content&&""!=a.content&&C.push(a)}for(var b=0;b<o.date.length;b++)null!=o.date[b].startDate&&""!=o.date[b].startDate&&(a={},
"tweets"==o.date[b].type?a.startdate=VMM.ExternalAPI.twitter.parseTwitterDate(o.date[b].startDate):"google spreadsheet"==o.date[b].type?(a.startdate=new Date(Date.parse(o.date[b].startDate)),trace(a.startdate)):a.startdate=VMM.Util.parseDate(o.date[b].startDate),a.uniqueid=o.date[b].startDate.toString()+"-"+b.toString(),a.enddate=null!=o.date[b].endDate&&""!=o.date[b].endDate?"tweets"==o.date[b].type?VMM.ExternalAPI.twitter.parseTwitterDate(o.date[b].endDate):"google spreadsheet"==o.date[b].type?
new Date(Date.parse(o.date[b].endDate)):VMM.Util.parseDate(o.date[b].endDate):a.startdate,a.title=o.date[b].headline,a.type=o.date[b].type,a.date=VMM.Util.date.prettyDate(a.startdate),a.dateDisplay=o.date[b].dateDisplay,a.asset=o.date[b].asset,a.fulldate=a.startdate.getTime(),a.content=m(o.date[b],a.startdate),null!=a.content&&""!=a.content&&C.push(a));C.sort(function(a,b){return a.fulldate-b.fulldate});E()}},VMM.Timeline.TimeNav=function(a,b,c){function d(a){VMM.Element.css(X,"left",Math.round(k.width/
2)+2);N(o,k.ease,k.duration,!0,a)}function e(){trace("CLICK");VMM.DragSlider.cancelSlide();k.multiplier>k.min_multiplier&&(k.multiplier-=1,0>k.multiplier&&(k.multiplier=k.min_multiplier),R(),S(!0))}function f(){trace("CLICK");VMM.DragSlider.cancelSlide();k.multiplier<k.max_multiplier&&(k.multiplier+=1,R(),S(!0))}function n(){VMM.DragSlider.cancelSlide();N(0);VMM.fireEvent(F,"UPDATE")}function j(a){VMM.DragSlider.cancelSlide();N(a.data.number);VMM.fireEvent(F,"UPDATE")}function l(a){VMM.Element.toggleClass(a.data.elem,
"zFront")}function q(a,b){VMM.Element.animate(A,b.time/2,k.ease,{left:b.left})}trace("VMM.Timeline.TimeNav");var h=[],r,z=[],s=[],p={},o=0,C=!1,g={type:"year",number:10,first:1970,last:2011,multiplier:100},i={type:"year",number:10,first:1970,last:2011,multiplier:100},t={},B={},E={},m={},v={},y={},u={},x={},D={},k=VMM.Timeline.Config;k.something=0;k.nav_width=100;k.nav_height=200;k.timeline=!1;k.marker_width=150;k.marker_height=48;k.density=2;k.timeline_width=900;k.interval_width=200;k.rows=[1,1,1];
k.multiplier=6;k.max_multiplier=16;k.min_multiplier=1;k.has_start_page=!1;k.rows=[k.marker_height,2*k.marker_height,1];null!=b&&""!=b&&(k.width=b);null!=c&&""!=c&&(k.height=c);var C=!1,A="",I="",J="",W="",K="",Q="",L="",X="",M="",G="",T="",U="";void 0;void 0;void 0;void 0;void 0;void 0;this.ver="0.1";var F=a;this.init=function(a,b){trace("VMM.Timeline.TimeNav init");"undefined"!=typeof a?this.setData(a,b):trace("WAITING ON DATA")};this.setData=function(a,b){if("undefined"!=typeof a){h=a;r=b;VMM.attachElement(F,
"");A=VMM.appendAndGetElement(F,"<div>","timenav");I=VMM.appendAndGetElement(A,"<div>","content");J=VMM.appendAndGetElement(A,"<div>","time");W=VMM.appendAndGetElement(J,"<div>","time-interval-minor");Q=VMM.appendAndGetElement(J,"<div>","time-interval-major");K=VMM.appendAndGetElement(J,"<div>","time-interval");L=VMM.appendAndGetElement(F,"<div>","timenav-background");X=VMM.appendAndGetElement(L,"<div>","timenav-line");VMM.appendAndGetElement(L,"<div>","timenav-interval-background","<div class='top-highlight'></div>");
p=H(h[h.length-1].enddate-h[0].startdate,!0);var c=H(h[0].startdate),w=H(h[h.length-1].enddate);D.type="millenium";D.first=c.milleniums;D.base=Math.floor(c.milleniums);D.last=w.milleniums;D.number=p.milleniums;D.multiplier=1E3;D.minor=1E3;x.type="century";x.first=c.centuries;x.base=Math.floor(c.centuries);x.last=w.centuries;x.number=p.centuries;x.multiplier=100;x.minor=100;u.type="decade";u.first=c.decades;u.base=Math.floor(c.decades);u.last=w.decades;u.number=p.decades;u.multiplier=10;u.minor=10;
E.type="year";E.first=c.years;E.base=Math.floor(c.years);E.last=w.years;E.number=p.years;E.multiplier=1;E.minor=12;B.type="month";B.first=c.months;B.base=Math.floor(c.months);B.last=w.months;B.number=p.months;B.multiplier=1;B.minor=Math.round(4.34812141);t.type="day";t.first=c.days;t.base=Math.floor(c.days);t.last=w.days;t.number=p.days;t.multiplier=1;t.minor=24;m.type="hour";m.first=c.hours;m.base=Math.floor(c.hours);m.last=w.hours;m.number=p.hours;m.multiplier=1;m.minor=60;v.type="minute";v.first=
c.minutes;v.base=Math.floor(c.minutes);v.last=w.minutes;v.number=p.minutes;v.multiplier=1;v.minor=60;y.type="decade";y.first=c.seconds;y.base=Math.floor(c.seconds);y.last=w.seconds;y.number=p.seconds;y.multiplier=1;y.minor=10;p.milleniums>h.length/k.density?g=D:p.centuries>h.length/k.density?g=Math.ceil(x):p.decades>h.length/k.density?g=u:p.years>h.length/k.density?g=E:p.months>h.length/k.density?g=B:p.days>h.length/k.density?g=t:p.hours>h.length/k.density?g=m:p.minutes>h.length/k.density?g=v:p.seconds>
h.length/k.density?g=y:(trace("NO IDEA WHAT THE TYPE SHOULD BE"),g.type="unknown");1<=p.milleniums?i=D:1<=p.centuries?i=x:1<=p.decades?i=u:1<=p.years?i=E:1<p.months?i=B:1<p.weeks?i=B:1<p.days?i=t:1<p.hours?i=m:1<p.minutes?i=v:1<p.seconds?i=v:(trace("NO IDEA WHAT THE TYPE SHOULD BE"),i.type="unknown");M=VMM.appendAndGetElement(W,"<div>","minor");R();for(c=0;c<h.length;c++){var o,V,O,w=VMM.appendAndGetElement(I,"<div>","marker");o=VMM.appendAndGetElement(w,"<div>","flag");V=VMM.appendAndGetElement(o,
"<div>","flag-content");VMM.appendAndGetElement(w,"<div>","dot");O=VMM.appendAndGetElement(w,"<div>","line");O=VMM.appendAndGetElement(O,"<div>","event-line");null!=h[c].asset&&""!=h[c].asset&&VMM.appendElement(V,VMM.MediaElement.thumbnail(h[c].asset,32,32));VMM.appendElement(V,"<h3>"+VMM.Util.unlinkify(h[c].title)+"</h3><h4>"+h[c].date+"</h4>");VMM.Element.attr(w,"id",h[c].uniqueid.toString());VMM.bindEvent(o,j,"",{number:c});VMM.bindEvent(o,l,"mouseenter mouseleave",{number:c,elem:o});w={marker:w,
flag:o,lineevent:O,type:"marker"};"start"==h[c].type&&(trace("BUILD MARKER HAS START PAGE"),k.has_start_page=!0,w.type="start");s.push(w)}for(c=0;c<r.length;c++)w={content:"",startdate:"",enddate:"",headline:"",uniqueid:"",color:""},w.title=r[c].headline,w.uniqueid=VMM.Util.unique_ID(4),w.color=r[c].color,w.content=VMM.appendAndGetElement(I,"<div>","era"),VMM.Element.attr(w.content,"id",w.uniqueid),VMM.Element.css(w.content,"background",w.color),VMM.appendElement(w.content,"<h3>"+VMM.Util.unlinkify(w.title)+
"</h3>"),w.startdate=VMM.Util.parseDate(r[c].startDate),w.enddate=VMM.Util.parseDate(r[c].endDate),z.push(w);S();d(!0);VMM.fireEvent(F,"LOADED");G=VMM.appendAndGetElement(F,"<div>","toolbar");k.has_start_page&&($backhome=VMM.appendAndGetElement(G,"<div>","back-home","<div class='icon'></div>"),VMM.bindEvent(".back-home",n,"click"),VMM.Element.css(G,"top",27));T=VMM.appendAndGetElement(G,"<div>","zoom-in","<div class='icon'></div>");U=VMM.appendAndGetElement(G,"<div>","zoom-out","<div class='icon'></div>");
VMM.Element.attribute($backhome,"title",VMM.Timeline.Config.language.messages.return_to_title);VMM.Element.attribute($backhome,"rel","tooltip");VMM.Element.attribute(T,"title",VMM.Timeline.Config.language.messages.expand_timeline);VMM.Element.attribute(T,"rel","tooltip");VMM.Element.attribute(U,"title",VMM.Timeline.Config.language.messages.contract_timeline);VMM.Element.attribute(U,"rel","tooltip");VMM.bindEvent(".zoom-in",e,"click");VMM.bindEvent(".zoom-out",f,"click");G.tooltip({selector:"div[rel=tooltip]",
placement:"right"});"mobile"==VMM.Browser.device||"tablet"==VMM.Browser.device?(VMM.TouchSlider.createPanel(L,A,k.width,k.spacing,!1),VMM.bindEvent(A,q,"TOUCHUPDATE")):VMM.DragSlider.createPanel(F,A,k.width,k.spacing,!1);C=!0}else trace("NO DATA")};this.setSize=function(a,b){null!=a&&(k.width=a);null!=b&&(k.height=b);C&&d()};this.setMarker=function(a,b,c){N(a,b,c)};this.getCurrentNumber=function(){return o};var P=function(a,b,c){var a=a.type,d=H(b),e=H(c),f=b.months,h=c.months;"millenium"==a?(f=b.milleniums,
h=c.milleniums):"century"==a?(f=d.centuries,h=e.centuries):"decade"==a?(f=d.decades,h=e.decades):"year"==a?(f=d.years,h=e.years):"month"==a?(f=d.months,h=e.months):"week"==a?(f=d.weeks,h=e.weeks):"day"==a?(f=d.days,h=e.days):"hour"==a?(f=d.hours,h=e.hours):"minute"==a&&(f=d.minutes,h=e.minutes);_pos=(f-g.base)*(k.interval_width/k.multiplier);_pos_end=(h-g.base)*(k.interval_width/k.multiplier);return pos={begin:_pos,end:_pos_end}},S=function(a){var b=2,c=0,d=0,e=0;VMM.Element.removeClass(".flag","row1");
VMM.Element.removeClass(".flag","row2");VMM.Element.removeClass(".flag","row3");for(var f=0;f<s.length;f++){var i,l=s[f].marker,m=s[f].flag,n=s[f].lineevent;i=P(g,h[f].startdate,h[f].enddate);j=i.begin;_pos_end=i.end;j=Math.round(j+-2);_pos_end=Math.round(_pos_end+-2);i=Math.round(_pos_end-j);a?(VMM.Element.stop(l),VMM.Element.animate(l,k.duration/2,k.ease,{left:j})):VMM.Element.css(l,"left",j);f==o&&(e=j);5<i&&(VMM.Element.css(n,"height",6),VMM.Element.css(n,"width",i),VMM.Element.css(n,"top",150));
j-c<k.marker_width+k.spacing?b<k.rows.length-1?b++:(b=0,d++):b=d=0;c=j;a?(VMM.Element.stop(m),VMM.Element.animate(m,k.duration,k.ease,{top:k.rows[b]})):VMM.Element.css(m,"top",k.rows[b]);k.has_start_page&&"start"==s[f].type&&VMM.Element.visible(l,!1)}for(b=0;b<z.length;b++){var j=z[b],c=j.content,j=P(g,j.startdate,j.enddate),d=j.end-j.begin;VMM.Element.css(c,"left",j.begin);VMM.Element.css(c,"width",d)}a&&(VMM.Element.stop(A),VMM.Element.animate(A,k.duration/2,k.ease,{left:k.width/2-e}))},H=function(a){var b=
{};b.days=a/864E5;b.weeks=b.days/7;b.months=b.days/30.4166666667;b.years=b.months/12;b.hours=24*b.days;b.minutes=1440*b.days;b.seconds=86400*b.days;b.decades=b.years/10;b.centuries=b.years/100;b.milleniums=b.years/1E3;return b},R=function(){VMM.attachElement(K,"");VMM.attachElement(Q,"");g.date=new Date(h[0].startdate.getFullYear(),0,1,0,0,0);i.date=new Date(h[0].startdate.getFullYear(),0,1,0,0,0);for(var a=0,b=0,c=!0,d=0,e=0;e<g.number+1;e++){var f;"century"==g.type?(c&&g.date.setFullYear(100*Math.floor(h[0].startdate.getFullYear()/
100)),g.date.setFullYear(g.date.getFullYear()+100*a),f=100*Math.floor(g.date.getFullYear()/100)):"decade"==g.type?(c&&g.date.setFullYear(10*Math.floor(h[0].startdate.getFullYear()/10)),g.date.setFullYear(g.date.getFullYear()+10*a),f=10*Math.floor(g.date.getFullYear()/10)):"year"==g.type?(g.date.setFullYear(g.date.getFullYear()+a),f=VMM.Util.date.prettyDate(g.date,!0,g.type)):"month"==g.type?(c&&g.date.setMonth(h[0].startdate.getMonth()),g.date.setMonth(g.date.getMonth()+a),f=VMM.Util.date.prettyDate(g.date,
!0,g.type)):"week"==g.type?(c&&(g.date.setMonth(h[0].startdate.getMonth()),g.date.setDate(Math.floor(7*h[0].startdate.getDate()))),g.date.setDate(g.date.getDate()+7*a),f=VMM.Util.date.day_abbr[g.date.getDay()]+" "+VMM.Util.date.month_abbr[g.date.getMonth()]+" "+g.date.getDate()):"day"==g.type?(c&&(g.date.setMonth(h[0].startdate.getMonth()),g.date.setDate(h[0].startdate.getDate())),g.date.setDate(g.date.getDate()+a),f=VMM.Util.date.prettyDate(g.date,!0,g.type)):"hour"==g.type?(c&&(g.date.setMonth(h[0].startdate.getMonth()),
g.date.setDate(h[0].startdate.getDate()),g.date.setHours(h[0].startdate.getHours())),g.date.setHours(g.date.getHours()+a),f=VMM.Util.date.prettyDate(g.date,!0,g.type)):"minute"==g.type?(c&&(g.date.setMonth(h[0].startdate.getMonth()),g.date.setDate(h[0].startdate.getDate()),g.date.setHours(h[0].startdate.getHours()),g.date.setMinutes(h[0].startdate.getMinutes())),g.date.setMinutes(g.date.getMinutes()+a),f=VMM.Util.date.prettyDate(g.date,!0,g.type)):"second"==g.type&&(c&&(g.date.setMonth(h[0].startdate.getMonth()),
g.date.setDate(h[0].startdate.getDate()),g.date.setHours(h[0].startdate.getHours()),g.date.setMinutes(h[0].startdate.getMinutes()),g.date.setSeconds(h[0].startdate.getSeconds())),g.date.setSeconds(g.date.getSeconds()+a),f=VMM.Util.date.prettyDate(g.date,!0,g.type));var a=1,c=!1,j=P(g,g.date,g.date),j=j.begin;$interval_date=VMM.appendAndGetElement(K,"<div>","_idd");VMM.appendElement($interval_date,f);VMM.Element.css($interval_date,"left",j);VMM.Element.css($interval_date,"text-indent",-(VMM.Element.width($interval_date)/
2));65>j-d?35>j-d?0==e%4?0==j?VMM.Element.css($interval_date,"display","none"):VMM.Element.css($interval_date,"display",""):VMM.Element.css($interval_date,"display","none"):VMM.Util.isEven(e)?VMM.Element.css($interval_date,"display","none"):VMM.Element.css($interval_date,"display",""):VMM.Element.css($interval_date,"display","");d=j}c=!0;for(e=_major_last_pos=_major_first_pos=0;e<Math.ceil(i.number)+1;e++)"century"==i.type?(c&&i.date.setFullYear(100*Math.floor(h[0].startdate.getFullYear()/100)),i.date.setFullYear(i.date.getFullYear()+
100*b),f=100*Math.floor(i.date.getFullYear()/100)):"decade"==i.type?(c&&i.date.setFullYear(10*Math.floor(h[0].startdate.getFullYear()/10)),i.date.setFullYear(i.date.getFullYear()+10*b),f=10*Math.floor(i.date.getFullYear()/10)):"year"==i.type?(i.date.setFullYear(i.date.getFullYear()+b),f=i.date.getFullYear()):"month"==i.type?(c&&i.date.setMonth(h[0].startdate.getMonth()),i.date.setMonth(i.date.getMonth()+b),f=VMM.Util.date.month[i.date.getMonth()]+" "+i.date.getFullYear()):"week"==i.type?(c&&(i.date.setMonth(h[0].startdate.getMonth()),
i.date.setDate(Math.floor(7*h[0].startdate.getDate()))),i.date.setDate(i.date.getDate()+7*b),f=VMM.Util.date.day_abbr[i.date.getDay()]+" "+VMM.Util.date.month_abbr[i.date.getMonth()]+" "+i.date.getDate()):"day"==i.type?(c&&(i.date.setMonth(h[0].startdate.getMonth()),i.date.setDate(h[0].startdate.getDate())),i.date.setDate(i.date.getDate()+b),f=VMM.Util.date.prettyDate(i.date,!0,i.type)):"hour"==i.type?(c&&(i.date.setMonth(h[0].startdate.getMonth()),i.date.setDate(h[0].startdate.getDate()),i.date.setHours(h[0].startdate.getHours())),
i.date.setHours(i.date.getHours()+b),f=VMM.Util.date.prettyDate(i.date,!0,i.type)):"minute"==i.type?(c&&(i.date.setMonth(h[0].startdate.getMonth()),i.date.setDate(h[0].startdate.getDate()),i.date.setHours(h[0].startdate.getHours()),i.date.setMinutes(h[0].startdate.getMinutes())),i.date.setMinutes(i.date.getMinutes()+b),f=VMM.Util.date.prettyDate(i.date,!0,i.type)):"second"==i.type&&(c&&(i.date.setMonth(h[0].startdate.getMonth()),i.date.setDate(h[0].startdate.getDate()),i.date.setHours(h[0].startdate.getHours()),
i.date.setMinutes(h[0].startdate.getMinutes()),i.date.setSeconds(h[0].startdate.getSeconds())),i.date.setSeconds(i.date.getSeconds()+b),f=VMM.Util.date.prettyDate(i.date,!0,i.type)),trace("interval_major.type "+i.type),b=1,j=P(g,i.date,i.date),j=j.begin,$interval_date=VMM.appendAndGetElement(Q,"<div>","major"),VMM.appendElement($interval_date,f),VMM.Element.css($interval_date,"left",j),VMM.Element.css($interval_date,"left",j),VMM.Element.css($interval_date,"text-indent",-(VMM.Element.width($interval_date)/
2)),c&&(_major_first_pos=j),c=!1,_major_last_pos=j;VMM.Element.width(I,g.number*(k.interval_width/k.multiplier));_minor_pos_offset=50;a=_major_last_pos-_major_first_pos+6*_minor_pos_offset;d+=6*_minor_pos_offset;a<d?VMM.Element.width(M,d):VMM.Element.width(M,a);VMM.Element.css(M,"left",_major_first_pos-_minor_pos_offset);k.timeline_width=VMM.Element.width(K)},N=function(a,b,c){o=a;var a=k.ease,d=k.duration;null!=b&&""!=b&&(a=b);null!=c&&""!=c&&(d=c);b=VMM.Element.position(s[o].marker);for(c=0;c<s.length;c++)VMM.Element.removeClass(s[c].marker,
"active");k.has_start_page&&"start"==s[o].type&&(VMM.Element.visible(s[o].marker,!1),VMM.Element.addClass(s[o].marker,"start"));VMM.Element.addClass(s[o].marker,"active");VMM.Element.stop(A);VMM.Element.animate(A,d,a,{left:k.width/2-b.left})}},VMM.Timeline.Config={},VMM.Timeline.DataObj={data_obj:{},model_array:[],getData:function(a){data=VMM.Timeline.DataObj.data_obj;"string"!=type.of(a)?(trace("DATA SOURCE: NOT JSON"),trace("TRYING HTML PARSE"),VMM.Timeline.DataObj.parseHTML(a)):a.match("%23")?
(trace("DATA SOURCE: TWITTER SEARCH"),VMM.Timeline.DataObj.model_Tweets.getData("%23medill")):a.match("spreadsheet")?(trace("DATA SOURCE: GOOGLE SPREADSHEET"),VMM.Timeline.DataObj.model_GoogleSpreadsheet.getData(a)):(trace("DATA SOURCE: JSON"),VMM.getJSON(a,VMM.Timeline.DataObj.parseJSON))},parseHTML:function(){trace("parseHTML");var a=VMM.Timeline.DataObj.data_template_obj;if(VMM.Element.find("#timeline section","time")[0]){a.timeline.startDate=VMM.Element.html(VMM.Element.find("#timeline section",
"time")[0]);a.timeline.headline=VMM.Element.html(VMM.Element.find("#timeline section","h2"));a.timeline.text=VMM.Element.html(VMM.Element.find("#timeline section","article"));var b=!1;0!=VMM.Element.find("#timeline section","figure img").length?(b=!0,a.timeline.asset.media=VMM.Element.attr(VMM.Element.find("#timeline section","figure img"),"src")):0!=VMM.Element.find("#timeline section","figure a").length&&(b=!0,a.timeline.asset.media=VMM.Element.attr(VMM.Element.find("#timeline section","figure a"),
"href"));b&&(0!=VMM.Element.find("#timeline section","cite").length&&(a.timeline.asset.credit=VMM.Element.html(VMM.Element.find("#timeline section","cite"))),0!=VMM.Element.find(this,"figcaption").length&&(a.timeline.asset.caption=VMM.Element.html(VMM.Element.find("#timeline section","figcaption"))))}VMM.Element.each("#timeline li",function(){var b={type:"default",startDate:"",dateDisplay:"",headline:"",text:"",asset:{media:"",credit:"",caption:""},tags:"Optional"};if(0!=VMM.Element.find(this,"time")){b.startDate=
VMM.Element.html(VMM.Element.find(this,"time")[0]);VMM.Element.find(this,"time")[1]&&(b.endDate=VMM.Element.html(VMM.Element.find(this,"time")[0]));b.dateDisplay=VMM.Element.html(VMM.Element.find(this,"h2"));b.headline=VMM.Element.html(VMM.Element.find(this,"h3"));b.text=VMM.Element.html(VMM.Element.find(this,"article"));var d=!1;0!=VMM.Element.find(this,"figure img").length?(d=!0,b.asset.media=VMM.Element.attr(VMM.Element.find(this,"figure img"),"src")):0!=VMM.Element.find(this,"figure a").length&&
(d=!0,b.asset.media=VMM.Element.attr(VMM.Element.find(this,"figure a"),"href"));d&&(0!=VMM.Element.find(this,"cite").length&&(b.asset.credit=VMM.Element.html(VMM.Element.find(this,"cite"))),0!=VMM.Element.find(this,"figcaption").length&&(b.asset.caption=VMM.Element.html(VMM.Element.find(this,"figcaption"))));trace(b);a.timeline.date.push(b)}});VMM.fireEvent(global,"DATAREADY",a)},parseJSON:function(a){"default"==a.timeline.type?(trace("DATA SOURCE: JSON STANDARD TIMELINE"),VMM.fireEvent(global,"DATAREADY",
a)):"twitter"==a.timeline.type?(trace("DATA SOURCE: JSON TWEETS"),VMM.Timeline.DataObj.model_Tweets.buildData(a)):(trace("DATA SOURCE: NO IDEA"),trace(type.of(a.timeline)))},model_Tweets:{type:"twitter",buildData:function(a){VMM.bindEvent(global,VMM.Timeline.DataObj.model_Tweets.onTwitterDataReady,"TWEETSLOADED");VMM.ExternalAPI.twitter.getTweets(a.timeline.tweets)},getData:function(a){VMM.bindEvent(global,VMM.Timeline.DataObj.model_Tweets.onTwitterDataReady,"TWEETSLOADED");VMM.ExternalAPI.twitter.getTweetSearch(a)},
onTwitterDataReady:function(a,b){for(var c=VMM.Timeline.DataObj.data_template_obj,d=0;d<b.tweetdata.length;d++){var e={type:"tweets",startDate:"",headline:"",text:"",asset:{media:"",credit:"",caption:""},tags:"Optional"};e.startDate=b.tweetdata[d].raw.created_at;e.headline=type.of(b.tweetdata[d].raw.from_user_name)?b.tweetdata[d].raw.from_user_name+" (<a href='https://twitter.com/"+b.tweetdata[d].raw.from_user+"'>@"+b.tweetdata[d].raw.from_user+"</a>)":b.tweetdata[d].raw.user.name+" (<a href='https://twitter.com/"+
b.tweetdata[d].raw.user.screen_name+"'>@"+b.tweetdata[d].raw.user.screen_name+"</a>)";e.asset.media=b.tweetdata[d].content;c.timeline.date.push(e)}VMM.fireEvent(global,"DATAREADY",c)}},model_GoogleSpreadsheet:{type:"google spreadsheet",getData:function(a){a="https://spreadsheets.google.com/feeds/list/"+VMM.Util.getUrlVars(a).key+"/od6/public/values?alt=json";VMM.getJSON(a,VMM.Timeline.DataObj.model_GoogleSpreadsheet.buildData)},buildData:function(a){for(var b=VMM.Timeline.DataObj.data_template_obj,
c=0;c<a.feed.entry.length;c++){var d=a.feed.entry[c];if(d.gsx$titleslide.$t.match("start"))b.timeline.startDate=d.gsx$startdate.$t,b.timeline.headline=d.gsx$headline.$t,b.timeline.asset.media=d.gsx$media.$t,b.timeline.asset.caption=d.gsx$mediacaption.$t,b.timeline.asset.credit=d.gsx$mediacredit.$t,b.timeline.text=d.gsx$text.$t,b.timeline.type="google spreadsheet";else{var e={type:"google spreadsheet",startDate:"",endDate:"",headline:"",text:"",type:"google spreadsheet",asset:{media:"",credit:"",caption:""},
tags:"Optional"};e.endDate=d.gsx$enddate.$t;e.startDate=d.gsx$startdate.$t;e.headline=d.gsx$headline.$t;e.asset.media=d.gsx$media.$t;e.asset.caption=d.gsx$mediacaption.$t;e.asset.credit=d.gsx$mediacredit.$t;e.text=d.gsx$text.$t;b.timeline.date.push(e)}}VMM.fireEvent(global,"DATAREADY",b)}},data_template_obj:{timeline:{headline:"",description:"",asset:{media:"",credit:"",caption:""},date:[]}},date_obj:{startDate:"2012,2,2,11,30",dateDisplay:"",headline:"",text:"",asset:{media:"http://youtu.be/vjVfu8-Wp6s",
credit:"",caption:""},tags:"Optional"}});
